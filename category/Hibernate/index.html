<!-- build time:Wed Sep 18 2019 17:28:03 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta name="google-site-verification" content="EmMIJLWJtXQxrrJkM-F8VfTiJjK7ASyFu9OBx-ZlSRo"><meta name="baidu-site-verification" content="XVGOi3sgWa"><script></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="baidu-site-verification" content="Kljn7UFZcB"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="Hibernate"><link rel="alternate" href="/atom.xml" title="余生梦见皆是缘" type="application/atom+xml"><meta name="description" content="SSH框架-Hibernate"><meta name="keywords" content="Hibernate"><meta property="og:type" content="article"><meta property="og:title" content="SSH框架-Hibernate"><meta property="og:url" content="https://www.ysmjjsy.com/category/Hibernate/index.html"><meta property="og:site_name" content="余生梦见皆是缘"><meta property="og:description" content="SSH框架-Hibernate"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/a8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/b14.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/c0.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/cc.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/d1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/d2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/d3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/d4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/d5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/d6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/d7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/f1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/f2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/f3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/f4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/f5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/f6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/f7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/g13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/q11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/w1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/w2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/w3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/w4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/w5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/w6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/w7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e1%20[2].png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e2%20[2].png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e3%20[2].png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e4%20[2].png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/e5%20[2].png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/r1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/r2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/r3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/r4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/r5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/Hibernate/r6.png"><meta property="og:updated_time" content="2019-09-18T09:24:42.242Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="SSH框架-Hibernate"><meta name="twitter:description" content="SSH框架-Hibernate"><meta name="twitter:image" content="https://www.ysmjjsy.com/category/Hibernate/1.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!0,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.ysmjjsy.com/category/Hibernate/"><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"6e2c9585"}),daovoice("update")</script><title>SSH框架-Hibernate | 余生梦见皆是缘</title><script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-145122509-1","auto"),ga("send","pageview")</script><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?45ce68cbde829747ea3eed77723e1cf4";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://github.com/GoyaDo" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="https://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">余生梦见皆是缘</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archives"></i><br>归档</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.ysmjjsy.com/category/Hibernate/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Goya"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="余生梦见皆是缘"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">SSH框架-Hibernate</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-09-27T00:00:00+08:00">2018-09-27 </time><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于&#58;</span> <time title="更新于" itemprop="dateModified" datetime="2019-09-18T17:24:42+08:00">2019-09-18 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SSH框架/" itemprop="url" rel="index"><span itemprop="name">SSH框架</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SSH框架/Hibernate/" itemprop="url" rel="index"><span itemprop="name">Hibernate</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/category/Hibernate/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/category/Hibernate/" itemprop="commentCount"></span> </a></span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o"></i> <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">5.1k 字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">18 分钟</span></div><div class="post-description">SSH框架-Hibernate</div></div></header><div class="post-body" itemprop="articleBody"><h1 id="Hibernate"><a href="#Hibernate" class="headerlink" title="Hibernate"></a>Hibernate</h1><p>JavaEE三层结构：<br>web层：struts2框架<br>service层：spring框架<br>dao层：hibernate框架<br>MVC思想：<br>m：模型<br>v：视图<br>c：控制器</p><p><img src="/category/Hibernate/1.png" alt="Hibernate"></p><p>Hibernate概述：<br>hibernate框架应用在javaee三层结果中的dao层框架<br>在dao层里面做对数据库crud操作，使用hibernate实现crud操作，hibernate底层代码就是jdbc，hibernate对jdbc进行封装，使用hibernate好处，不需要写复杂的jdbc代码了，不需要写sql语句实现<br>hibernate开源的轻量级框架<br>hibernate版本：<br>Hibernate3.x<br>Hibernate4.x<br>Hibernate5.x（学习）</p><p><img src="/category/Hibernate/2.png" alt="Hibernate"></p><p>lib：hibernate相关jar包</p><p>Hibernate核心内容是ORM（关系对象模型）。可以将对象自动的生成数据库中的信息，使得开发更加的面向对象。这样作为程序员就可以使用面向对象的思想来操作数据库，而不用关心繁琐的JDBC。所以，Hibernate处于三层架构中的D层（持久层）。</p><p><strong>使用Hibernate的优点</strong></p><ol><li>Hibernate可以使用在java的任何项目中，不一定非要使用在java web项目中。因为Hibernate不需要类似于tomact这些容器的支持，可以直接通过一个main方法进行测试。</li><li>通过下面的实例，可以发现使用Hibernate可以大大减少代码量。</li><li>由于使用了Hibernate，代码中不涉及具体的JDBC语句，所以就方便了代码的可移植性。</li></ol><p><strong>缺点</strong></p><p>首先，hibernate把数据库和你隔离了，你不需要关注数据库是mysql还是oracle，hibernate来帮你生成查询的sql。但问题也来了，如果你就要用某种数据库特有的功能，或者你就要让查询的sql完全符合你的心意，这就难了。如果使用hibernate，虽然它也能对生成的查询进行一定程度的定制，但就有点隔靴搔痒了，而且你开发起来付出的代价可能更大。至于hibernate对native sql的支持，其实也还是完善的，有兴趣的朋友可以看看。而且这种native sql还能返回non-managed entity，不走hibernate的cache，优化是能搞了，但如果你整个项目都这么搞，那还是ibatis对sql管理的好些。</p><p>第二，很多web服务，对cache的依赖是非常大的，hibernate自带的cache按理说也是很强大的，但是还是不能满足很多需求。</p><p>第三，hibernate的确是在你项目开始的时候给你节约了很多时间。但是它让你的业务逻辑模型和数据库模型互相依赖的程度太高了。这短期没有问题，但随着项目的变迁，这些都会改变，在维持这种紧紧耦合的关系的时候，你会发现你的代码特别脆弱，随便改一处数据库的schema，整个java项目可能要改几十处。而且现在mybatis的自动mapping做的也不差，开发起来也没多花多少时间。等项目进入中后期，你需要大量定制和优化查询的时候，mybatis的开发效率就胜出了。</p><p>强烈建议不用hibernate，尤其是需要处理大量数据或者大并发情况的网站服务</p><p>当一个 历经多年，无数个程序员迭代出来的 一千多张表 的大型系统 然后 hibernate 到底有多噩梦了, 后期 干脆 直接JDBC了 因为hibernate 在这种 表结构 完全乱套的</p><h2 id="ORM思想"><a href="#ORM思想" class="headerlink" title="ORM思想"></a>ORM思想</h2><p>hibernate使用orm思想对数据库进行crud操作<br>在web阶段学习javabean，更正确的叫法，实体类<br><strong>orm：object relational mapping：对象关系映射</strong><br>让实体类和数据库进行一一对应<br>让实体类首先和数据库表对应<br>让实体类属性和表里面字段对应<br>不需要直接操作数据库表，而操作表对应实体类对象</p><p><img src="/category/Hibernate/3.png" alt="Hibernate"></p><h2 id="Hibernate入门"><a href="#Hibernate入门" class="headerlink" title="Hibernate入门"></a>Hibernate入门</h2><p><strong>搭建hibernate环境：</strong></p><ul><li><p>第一步：导入hibernate的jar包</p><p><img src="/category/Hibernate/4.png" alt="Hibernate"></p><p>hibernate本身没有日志信息输出，需要导入日志信息输出的jar包：</p><p>还有mysql驱动的jar包：</p><p><img src="/category/Hibernate/5.png" alt="Hibernate"></p></li><li><p>第二步：创建实体类：</p><p><img src="/category/Hibernate/6.png" alt="Hibernate"></p><p>使用hibernate，不需要自己手动创建表，hibernate帮把表创建出来</p></li><li><p>第三步：配置实体类和数据库表一一对应关系（映射关系）</p><p>使用配置文件实现映射关系<br>创建xml格式的配置文件。实体类名字.hbm.xml<br>映射配置文件没有固定要求，建议，在实体类所在包里面创建。<br>配置是xml格式，在配置文件中首先引入xml约束<br>学过dtd、schema，在hibernate里面引入dtd约束</p><p><img src="/category/Hibernate/7.png" alt="Hibernate"></p><p>配置映射关系</p><p><img src="/category/Hibernate/8.png" alt="Hibernate"></p><p><img src="/category/Hibernate/9.png" alt="Hibernate"></p></li><li><p>第四步：创建hibernatede的核心配置文件</p><p>核心配置文件格式xml，但是核心配置文件名称和位置是固定的<br>位置必须在src下面，名称：必须hibernate.cfg.xml</p><p>引入dtd约束：</p><p><img src="/category/Hibernate/10.png" alt="Hibernate"></p><p>hibernate操作过程中，只会加载核心配置文件，其他配置文件不会加载</p><ul><li><p>第一部分：配置数据库信息</p><p><img src="/category/Hibernate/11.png" alt="Hibernate"></p></li><li><p>第二部分：配置hibernate信息</p><p><img src="/category/Hibernate/12.png" alt="Hibernate"></p></li><li><p>第三部分：把映射文件放到核心配置文件中</p><p><img src="/category/Hibernate/13.png" alt="Hibernate"></p></li></ul></li></ul><h3 id="实现添加操作"><a href="#实现添加操作" class="headerlink" title="实现添加操作"></a>实现添加操作</h3><ul><li>第一步：加载hibernate核心配置文件</li><li>第二步：创建SessionFactory对象</li><li>第三步：使用SessionFactory创建session对象</li><li>第四步：开启事务</li><li>第五步：写具体逻辑crud操作</li><li>第六步：提交事务</li><li>第七步：关闭资源</li></ul><p><img src="/category/Hibernate/a1.png" alt="Hibernate"></p><p><img src="/category/Hibernate/a2.png" alt="Hibernate"></p><p>建表，插入记录</p><h3 id="Hibernate配置文件详解"><a href="#Hibernate配置文件详解" class="headerlink" title="Hibernate配置文件详解"></a>Hibernate配置文件详解</h3><h4 id="Hibernate映射配置文件"><a href="#Hibernate映射配置文件" class="headerlink" title="Hibernate映射配置文件"></a>Hibernate映射配置文件</h4><p>映射配置文件位置名称和位置没有固定要求<br>映射配置文件中，标签name属性值写实体类相关内容<br>class标签name属性值实体类全路径<br>id标签和property标签name属性值，实体类属性内容<br>id标签和property标签，column属性可以省略，不写默认和name属性值一样<br>property标签里面还有type属性：设置生成表字段的类型，自动对应类型</p><h4 id="Hibernate核心配置文件"><a href="#Hibernate核心配置文件" class="headerlink" title="Hibernate核心配置文件"></a>Hibernate核心配置文件</h4><p>配置写位置要求：</p><p><img src="/category/Hibernate/a3.png" alt="Hibernate"></p><p>配置三部分要求：<br>数据库部分必须的<br>hibernate部分可选的<br>映射文件必须的<br>核心配置文件和名称位置固定的：<br>位置：src下面<br>名称：hibernate.cfg.xml</p><h3 id="Hibernate核心api"><a href="#Hibernate核心api" class="headerlink" title="Hibernate核心api"></a>Hibernate核心api</h3><h4 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h4><p><img src="/category/Hibernate/a4.png" alt="Hibernate"></p><p>到src下面找到名称hibernate.cfg.xml配置文件，创建对象，把配置文件放到对象里面（加载核心配置文件）</p><h4 id="SessionFactory"><a href="#SessionFactory" class="headerlink" title="SessionFactory"></a>SessionFactory</h4><p>使用Configuration对象创建sessionFactory对象<br>创建sessionfactory过程中做事情：<br>根据核心配置文件中，有数据库配置，有映射文件部分，到数据库立案根据映射关系吧表创建</p><p><img src="/category/Hibernate/a5.png" alt="Hibernate"></p><p>创建sessionFactory过程中，这个过程特别耗资源：<br>在hibernate操作中，建议一个项目一般创建一个sessionFactory对象<br>具体实现：<br>写工具类：写静态代码块实现<br>静态代码块在类加载时候执行，执行一次</p><p><img src="/category/Hibernate/a6.png" alt="Hibernate"></p><h4 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h4><p>session类似于jdbc中connection<br>调用session里面不同的方法实现crud操作<br>添加：save方法<br>修改：update方法<br>删除：delete方法<br>根据id查询fget方法<br>session对象-单线程对象：<br>session对象不能共用，只能自己使用</p><h4 id="Transaction"><a href="#Transaction" class="headerlink" title="Transaction"></a>Transaction</h4><p>事务对象</p><p><img src="/category/Hibernate/a7.png" alt="Hibernate"></p><p>事务提交和回滚方法</p><p><img src="/category/Hibernate/a8.png" alt="Hibernate"></p><p>事务概念<br>事务四个特性<br>原子性、一致性、隔离性、持久性</p><h3 id="解决配置文件没有提示问题"><a href="#解决配置文件没有提示问题" class="headerlink" title="解决配置文件没有提示问题"></a>解决配置文件没有提示问题</h3><p>把约束文件引入到eclipse中<br>window—&gt;Perferences—&gt;xm c(XML Catalog)—&gt;<br>在配置文件复制网址<br>add<br>url-key-网址<br>location：本地文件路径</p><h3 id="实体类编写规则"><a href="#实体类编写规则" class="headerlink" title="实体类编写规则"></a>实体类编写规则</h3><p>实体类里的属性要是私有的<br>私有属性使用公开的get、set方法操作<br>要求实体类有属性作为唯一的值（一般使用ID值）<br>实体类属性建议不使用基本数据类型，建议使用基本数据类型对应的包装类<br>八个基本类型对应的包装类：<br>int-Integer<br>char-Character<br>byte-Byte<br>short-Short<br>long-Long<br>float-Float<br>double-Double<br>boolean-Boolean</p><h3 id="Hibernate主键生成策略"><a href="#Hibernate主键生成策略" class="headerlink" title="Hibernate主键生成策略"></a>Hibernate主键生成策略</h3><p>hibernate要求实体类里面有一个属性作为唯一值，对应表主键，主键可以不同生成策略<br>hibernate主键生成策略有很多值：</p><p><img src="/category/Hibernate/b1.png" alt="Hibernate"></p><p>在class属性里面有很多的值：</p><p><img src="/category/Hibernate/b2.png" alt="Hibernate"></p><p>native：根据使用的数据库帮选择那个值<br>uuid：hibernaete自动生成uuid的值：<br>使用uuid生成策略，实体类里的id属性类型必须字符串类型</p><p><img src="/category/Hibernate/b3.png" alt="Hibernate"></p><p>配置部分写出uuid值</p><p><img src="/category/Hibernate/b4.png" alt="Hibernate"></p><h3 id="实体类操作"><a href="#实体类操作" class="headerlink" title="实体类操作"></a>实体类操作</h3><p>save会保存，如果update没查就该，只会该指定值，其他为null<br>调用session里的save方法实现</p><p><img src="/category/Hibernate/b5.png" alt="Hibernate"></p><p>根据id查询：<br>调用session里面的get方法</p><p><img src="/category/Hibernate/b6.png" alt="Hibernate"></p><p><strong>修改操作：</strong></p><p><img src="/category/Hibernate/b7.png" alt="Hibernate"></p><p><strong>删除操作：</strong></p><p><img src="/category/Hibernate/b8.png" alt="Hibernate"></p><p><strong>实体类对象状态（概念）：</strong></p><ul><li><p><strong>瞬时态：对象里面没有id值，对象与session没有关联</strong></p><p><img src="/category/Hibernate/b9.png" alt="Hibernate"></p></li><li><p><strong>持久态：对象里面有id值，对象与session关联</strong></p><p><img src="/category/Hibernate/b10.png" alt="Hibernate"></p></li><li><p><strong>托管态：对象里面有id值，对象与session没有关联</strong></p><p><img src="/category/Hibernate/b11.png" alt="Hibernate"></p></li></ul><p>演示实体类对象的方法：</p><p>saveOrUpdate：实现添加、修改</p><p><img src="/category/Hibernate/b12.png" alt="Hibernate"></p><p><img src="/category/Hibernate/b13.png" alt="Hibernate"></p><p><img src="/category/Hibernate/b14.png" alt="Hibernate"></p><h3 id="Hibernate一级缓存"><a href="#Hibernate一级缓存" class="headerlink" title="Hibernate一级缓存"></a>Hibernate一级缓存</h3><p>什么是缓存<br>数据存到数据库里面，数据库本身是文件系统，使用流方式操作文件，效率不是很高：<br>把数据存到内存里面，不需要使用流方式，可以读取内存中数据<br>把数据放到内存中，提供读取效率</p><h4 id="Hibernate缓存"><a href="#Hibernate缓存" class="headerlink" title="Hibernate缓存"></a>Hibernate缓存</h4><p>hibernate框架中提供很多优化方式，hibernate的缓存就是一个优化方式<br>hibernate缓存特点：</p><ul><li><strong>第一类：hibernate的一级缓存</strong><ul><li>hibernate的一级缓存默认打开的</li><li>hibernate的一级缓存使用范围，是session范围，从session创建到session关闭范围</li><li>hibernate的一级缓存中，存储数据必须持久态数据</li></ul></li></ul><ul><li><strong>第二类：hibernate的二级缓存</strong><ul><li>目前已经不适用了，替代技术：redis</li><li>二级缓存默认不是打开的，需要配置及</li><li>二级缓存适用范围是sessionFactory</li></ul></li></ul><h4 id="验证一级缓存存在"><a href="#验证一级缓存存在" class="headerlink" title="验证一级缓存存在"></a>验证一级缓存存在</h4><p>验证方式：<br>首先根据uid=1查询，返回对象<br>其次再根据uid=1查询，返回对象</p><p><img src="/category/Hibernate/c1.png" alt="Hibernate"></p><p><img src="/category/Hibernate/c2.png" alt="Hibernate"></p><p>第一步执行get方法之后，发送sql语句查询数据库<br>第二步执行get方法之后，没有发送sql语句，查询一级缓存内容</p><h4 id="Hibernate一级缓存执行过程"><a href="#Hibernate一级缓存执行过程" class="headerlink" title="Hibernate一级缓存执行过程"></a>Hibernate一级缓存执行过程</h4><p><img src="/category/Hibernate/c3.png" alt="Hibernate"></p><h4 id="Hibernate一级缓存特性"><a href="#Hibernate一级缓存特性" class="headerlink" title="Hibernate一级缓存特性"></a>Hibernate一级缓存特性</h4><p>持久态自动更新数据库</p><p><img src="/category/Hibernate/c4.png" alt="Hibernate"></p><p>执行过程</p><p><img src="/category/Hibernate/c5.png" alt="Hibernate"></p><h3 id="Hibernate事务操作"><a href="#Hibernate事务操作" class="headerlink" title="Hibernate事务操作"></a>Hibernate事务操作</h3><p>什么是事务：<br>是操作中基本单元，一组操作，要么都成功，要么都失败<br>事务特性：<br>原子性，一致性，持久性，隔离性<br>不考虑隔离性产生问题：<br>脏读，不可重复读，虚度<br>设置事务隔离级别：<br>mysql默认隔离级别：repeatable read</p><p><img src="/category/Hibernate/c6.png" alt="Hibernate"></p><h4 id="Hibernate事务代码规范写法"><a href="#Hibernate事务代码规范写法" class="headerlink" title="Hibernate事务代码规范写法"></a>Hibernate事务代码规范写法</h4><p>代码结构：</p><p><img src="/category/Hibernate/c7.png" alt="Hibernate"></p><p><img src="/category/Hibernate/c8.png" alt="Hibernate"></p><h3 id="Hibernate绑定session"><a href="#Hibernate绑定session" class="headerlink" title="Hibernate绑定session"></a>Hibernate绑定session</h3><p>session类似于jdbc的connection，之前web阶段学过ThreadLocal<br>Hibernate帮实现与本地线程绑定session<br>获取与本地线程session：<br>在hibernate核心配置文件中配置</p><p><img src="/category/Hibernate/c9.png" alt="Hibernate"></p><p>调用sessionFactory里面的方法得到</p><p><img src="/category/Hibernate/c0.png" alt="Hibernate"></p><p>获取与本地线程绑定session时候，关闭session报错，不需要手动关闭</p><p><img src="/category/Hibernate/cc.png" alt="Hibernate"></p><h3 id="Hibernate的api使用"><a href="#Hibernate的api使用" class="headerlink" title="Hibernate的api使用"></a>Hibernate的api使用</h3><h4 id="Query对象"><a href="#Query对象" class="headerlink" title="Query对象"></a>Query对象</h4><p>使用Query对象，不需要写sql语句，但是写hql语句<br>hql：hibernate query language，hibernate提供的查询语言，这个hql语句和普通sql很相似<br>hql和sql区别：<br>使用sql操作表和表字段<br>使用hql操作实体类和属性<br>查询所有hql语句：<br>from 实体类名称<br>Query对象的使用：<br>创建Query对象<br>调用Query对象里的方法</p><p><img src="/category/Hibernate/d1.png" alt="Hibernate"></p><h4 id="Criteria对象"><a href="#Criteria对象" class="headerlink" title="Criteria对象"></a>Criteria对象</h4><p>使用这个对象查询操作，但是使用这个对象的时候，不需要写语句，直接调用实现</p><p><img src="/category/Hibernate/d2.png" alt="Hibernate"></p><h4 id="SQlQuery对象"><a href="#SQlQuery对象" class="headerlink" title="SQlQuery对象"></a>SQlQuery对象</h4><p>使用hibernate时候，调用底层sql实现</p><p><img src="/category/Hibernate/d3.png" alt="Hibernate"></p><p>返回的是一个数组形式list集合每部分是个数组</p><p><img src="/category/Hibernate/d4.png" alt="Hibernate"></p><p>返回的是一个对象数组</p><p><img src="/category/Hibernate/d5.png" alt="Hibernate"></p><p><strong>web开发中sessionFactory不要关闭</strong></p><h3 id="表与表之间的关系"><a href="#表与表之间的关系" class="headerlink" title="表与表之间的关系"></a>表与表之间的关系</h3><p>一对多：一个分类里有多个商品，一个商品只能属于一个分类<br>一对多建表：通过外键建立关系</p><p><img src="/category/Hibernate/d6.png" alt="Hibernate"></p><p>多对多：一个订单里面有多个商品，一个商品属于多个订单</p><p><img src="/category/Hibernate/d7.png" alt="Hibernate"></p><p>一对一：一个男人只能有一个妻子，一个女人只能有一个丈夫</p><h3 id="一对多操作"><a href="#一对多操作" class="headerlink" title="一对多操作"></a>一对多操作</h3><h4 id="一对多映射配置"><a href="#一对多映射配置" class="headerlink" title="一对多映射配置"></a>一对多映射配置</h4><p>以客户（Customer）联系人（LinkMan）为例<br>第一步：创建两个实体类，客户和联系人<br>第二步：让两个实体类之间互相表示：<br>在客户实体类里面表示多个联系人：一个客户里面有多个联系人</p><p>hibernate要求使用集合表示多的数据，使用set集合</p><p><img src="/category/Hibernate/e1.png" alt="Hibernate"></p><p>在联系人实体类里面表示所属客户：一个联系人只能属于一个客户</p><p><img src="/category/Hibernate/e2.png" alt="Hibernate"></p><p>配置映射文件：<br>实体类名称.hbm.xml：hibernate-mapping里面配置<br>一般一个实体类对应一个映射文件<br>把映射最基本配置完成</p><p><img src="/category/Hibernate/e3.png" alt="Hibernate"></p><p>在映射文件中，配置一对多关系：<br>在客户映射文件中，表示所有联系人<br>class里面配置：</p><p><img src="/category/Hibernate/e4.png" alt="Hibernate"></p><p>在联系人映射文件中，表示所属客户<br>class里面配置：</p><p><img src="/category/Hibernate/e5.png" alt="Hibernate"></p><p>创建核心配置文件，把映射文件引入核心配置文件中</p><p><img src="/category/Hibernate/e6.png" alt="Hibernate"></p><h4 id="一对多级联操作"><a href="#一对多级联操作" class="headerlink" title="一对多级联操作"></a>一对多级联操作</h4><p>级联操作：<br>级联保存：添加了一个客户，为这个客户添加多个联系人<br>添加客户，为这个客户添加一个联系人<br>方式一：</p><p><img src="/category/Hibernate/f1.png" alt="Hibernate"></p><p>方式二：<br>一般都是根据客户添加联系人<br>第一步：在客户映射文件中进行配置<br>在客户映射文件里面，set标签进行配置</p><p><img src="/category/Hibernate/f2.png" alt="Hibernate"></p><p>第二步：创建客户和联系人对象，只需要把联系人放到客户里面就可以了，最终只需要保存客户就行了</p><p><img src="/category/Hibernate/f3.png" alt="Hibernate"></p><p>级联删除：删除某一个客户，这个客户的所有联系人都删除<br>删除某个客户，把客户里面联系人也删除<br>具体实现：<br>第一步：在客户映射文件中，进行配置<br>set标签属性cascade属性值delete</p><p><img src="/category/Hibernate/f4.png" alt="Hibernate"></p><p>第二步：在代码中直接删除客户：<br>先根据id查询对象，调用session里面delete方法删除</p><p><img src="/category/Hibernate/f5.png" alt="Hibernate"></p><p>执行过程：<br>根据id查询客户<br>根据外键id查联系人<br>把联系人外键设置为null<br>删除联系人</p><h4 id="一对多修改操作"><a href="#一对多修改操作" class="headerlink" title="一对多修改操作"></a>一对多修改操作</h4><p><img src="/category/Hibernate/f6.png" alt="Hibernate"></p><p><strong><em>inverse属性</em></strong><br>因为hibernate是双向维护外键，在客户和联系人里面都需要维护外键，修改客户时候修改一次外键，修改联系人时候也修改一次外键，造成效率问题<br>解决方式：让其中一方不维护外键<br>一对多里面，让其中为一的那一方方放弃外键维护<br>具体实现：在放弃关系维护映射文件中，进行配置，在set标签上使用inverse属性<br>inverse属性默认值：false，不放弃关系维护。true，表示放弃关系维护</p><p><img src="/category/Hibernate/f7.png" alt="Hibernate"></p><h3 id="多对多操作"><a href="#多对多操作" class="headerlink" title="多对多操作"></a>多对多操作</h3><h4 id="多对多映射配置"><a href="#多对多映射配置" class="headerlink" title="多对多映射配置"></a>多对多映射配置</h4><p>以用户和角色为例：<br>第一步：创建实体类，用户和角色<br>第二步：让两个实体类之间互相表示<br>用户里面表示所有角色，使用set集合</p><p><img src="/category/Hibernate/g1.png" alt="Hibernate"></p><p>一个角色多个用户，使用set集合</p><p><img src="/category/Hibernate/g2.png" alt="Hibernate"></p><p>第三步：配置映射关系：<br>基本配置：Role.hbm.xml：</p><p><img src="/category/Hibernate/g3.png" alt="Hibernate"></p><p>User.hbm.xml：</p><p><img src="/category/Hibernate/g4.png" alt="Hibernate"></p><p>配置多对多关系<br>在用户里面表示所有角色，使用set标签<br>Role.hbm.xml：</p><p><img src="/category/Hibernate/g5.png" alt="Hibernate"></p><p>User.hbm.xml：</p><p><img src="/category/Hibernate/g6.png" alt="Hibernate"></p><p>在角色里面表示所用用户，使用set标签<br>第四步：在核心配置文件中引入映射文件</p><p><img src="/category/Hibernate/g7.png" alt="Hibernate"></p><h4 id="多对多级联保存"><a href="#多对多级联保存" class="headerlink" title="多对多级联保存"></a>多对多级联保存</h4><p>根据用户保存角色<br>第一步：在用户配置文件中set标签进行配置，cascade值save-update</p><p><img src="/category/Hibernate/g8.png" alt="Hibernate"></p><p>第二步：写代码实现：<br>创建用户和角色对象，把角色放到用户里面，最终保存用户就可以了</p><p><img src="/category/Hibernate/g9.png" alt="Hibernate"></p><h4 id="多对多级联删除"><a href="#多对多级联删除" class="headerlink" title="多对多级联删除"></a>多对多级联删除</h4><p>第一步：在set标签进行配置，cascade值delete</p><p><img src="/category/Hibernate/g10.png" alt="Hibernate"></p><p>第二步：删除用户</p><p><img src="/category/Hibernate/g11.png" alt="Hibernate"></p><h4 id="维护第三张表关系"><a href="#维护第三张表关系" class="headerlink" title="维护第三张表关系"></a>维护第三张表关系</h4><p>用户和角色是多对多关系，维护关系通过第三张表维护<br>让某个用户有某个角色：<br>第一步：通过id查询用户和角色<br>第二步：把角色放到用户界面：<br>把角色对象放到用户set集合</p><p><img src="/category/Hibernate/g12.png" alt="Hibernate"></p><p>让某个用户没有某个角色：<br>第一步：通过id查询用户和角色<br>第二步：从用户里面把角色去掉：<br>从set集合里面把角色移出</p><p><img src="/category/Hibernate/g13.png" alt="Hibernate"></p><h3 id="Hibernate查询方式"><a href="#Hibernate查询方式" class="headerlink" title="Hibernate查询方式"></a>Hibernate查询方式</h3><h4 id="对象导航查询"><a href="#对象导航查询" class="headerlink" title="对象导航查询"></a>对象导航查询</h4><p>根据id查询某个客户，再查询客户里面所有联系人<br><img src="/category/Hibernate/q1.png" alt="Hibernate"></p><h4 id="OID查询"><a href="#OID查询" class="headerlink" title="OID查询"></a>OID查询</h4><p>根据id查询某一条记录，返回对象<br>调用session里面的get方法实现</p><p><img src="/category/Hibernate/q2.png" alt="Hibernate"></p><h4 id="hql查询"><a href="#hql查询" class="headerlink" title="hql查询"></a>hql查询</h4><p>Query对象，写hq语句实现查询<br>普通sql操作数据库表和字段，hql操作实体类和属性<br>常用的hql语句：<br>查询所有：from 实体类名称<br>条件查询：<br>from 实体类名称 where 实体类属性名称=? and 实体类属性名称=?<br>from 实体类名称 where 实体类属性名称 like ?<br>排序查询：from 实体类名称 order by 实体类属性名称 asc/desc<br>使用hql查询操作时候，使用Query对象：<br>创建Query对象，写hql语句<br>调用query对象里面的方法得到结果</p><h5 id="查询所有"><a href="#查询所有" class="headerlink" title="查询所有"></a>查询所有</h5><p><img src="/category/Hibernate/q3.png" alt="Hibernate"></p><h5 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h5><p>hql条件查询语句写法：<br>from 实体类名称 where 实体类属性名称=? and 实体类属性名称=?</p><p><img src="/category/Hibernate/q4.png" alt="Hibernate"></p><p>from 实体类名称 where 实体类属性名称 like ?</p><p><img src="/category/Hibernate/q5.png" alt="Hibernate"></p><h5 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h5><p>from 实体类名称 order by 实体类属性名称 asc/desc</p><p><img src="/category/Hibernate/q6.png" alt="Hibernate"></p><h5 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h5><p>使用关键字limit实现</p><p><img src="/category/Hibernate/q7.png" alt="Hibernate"></p><p>在hql中实现分页：<br>在hql操作中，在语句里面不能写limit，hibernate的Query对象封装了两个方法实现分页操作</p><p><img src="/category/Hibernate/q8.png" alt="Hibernate"></p><h5 id="投影查询"><a href="#投影查询" class="headerlink" title="投影查询"></a>投影查询</h5><p>查询的不是所有字段的值，而是部分字段的值<br>投影查询的hql语句：<br>select 实体类属性名称1，实体类属性名称2 from 实体类属性名称<br>select后面不能写* ，不支持</p><p><img src="/category/Hibernate/q9.png" alt="Hibernate"></p><h5 id="聚合函数的使用"><a href="#聚合函数的使用" class="headerlink" title="聚合函数的使用"></a>聚合函数的使用</h5><p>常用聚集函数：count、sum、avg、max、min<br>hql聚集函数写法：<br>查询表记录数：<br>select count(* ) from 实体类名称</p><p><img src="/category/Hibernate/q10.png" alt="Hibernate"></p><p><img src="/category/Hibernate/q11.png" alt="Hibernate"></p><h4 id="QBC查询"><a href="#QBC查询" class="headerlink" title="QBC查询"></a>QBC查询</h4><p>Criteria对象<br>使用hql查询需要写hql语句实现，使用qbc时候，不需要写语句，使用方法实现<br>使用qbc时候，操作实体类和属性<br>使用qbc，使用Criteria对象实现</p><h5 id="查询所有-1"><a href="#查询所有-1" class="headerlink" title="查询所有"></a>查询所有</h5><p>创建Criteria对象<br>调用方法得到结果</p><p><img src="/category/Hibernate/w1.png" alt="Hibernate"></p><h5 id="条件查询-1"><a href="#条件查询-1" class="headerlink" title="条件查询"></a>条件查询</h5><p>没有语句，使用封装的方法</p><p><img src="/category/Hibernate/w2.png" alt="Hibernate"></p><p><img src="/category/Hibernate/w3.png" alt="Hibernate"></p><h5 id="排序查询-1"><a href="#排序查询-1" class="headerlink" title="排序查询"></a>排序查询</h5><p><img src="/category/Hibernate/w4.png" alt="Hibernate"></p><h5 id="分页查询-1"><a href="#分页查询-1" class="headerlink" title="分页查询"></a>分页查询</h5><p><img src="/category/Hibernate/w5.png" alt="Hibernate"></p><p>开始位置计算公式：（当前页-1）* 每页记录数</p><h5 id="统计查询"><a href="#统计查询" class="headerlink" title="统计查询"></a>统计查询</h5><p><img src="/category/Hibernate/w6.png" alt="Hibernate"></p><h5 id="离线查询"><a href="#离线查询" class="headerlink" title="离线查询"></a>离线查询</h5><p>不用session也能创建Criteria对象</p><p><img src="/category/Hibernate/w7.png" alt="Hibernate"></p><p>servlet调用service，service调用dao<br>dao里面对数据库crud操作<br>在dao里面使用hibernate框架，使用hibernate框架的时候，调用session里面的方法实现功能</p><h4 id="HQL多表查询"><a href="#HQL多表查询" class="headerlink" title="HQL多表查询"></a>HQL多表查询</h4><p>Mysql里面多表查询：<br>内连接：</p><p><img src="/category/Hibernate/e1 [2].png" alt="Hibernate"></p><p>左外连接：</p><p><img src="/category/Hibernate/e2 [2].png" alt="Hibernate"></p><p>右外连接：</p><p><img src="/category/Hibernate/e3 [2].png" alt="Hibernate"></p><p>HQL多表查询：<br>内连接：<br>内连接查询hql语句写法：客户联系人为例<br>from Customer c inner join c.setLinkMan</p><p><img src="/category/Hibernate/e4 [2].png" alt="Hibernate"></p><p><img src="/category/Hibernate/e5 [2].png" alt="Hibernate"></p><p>左外连接：<br>返回list中每部分是数组<br>hql语句：from Customer c left outer join c.setLinkMan<br>右外连接：<br>迫切内连接：和内连接底层实现一样的<br>区别：使用内连接返回list中每部分是数组，迫切内连接返回list每部分是对象<br>hql语句写法：from Customer c inner join fetch c.setLinkMan<br>迫切左外连接：from Customer c left outer join fetch c.setLinkMan<br>返回list每部分是对象</p><h4 id="本地sql查询"><a href="#本地sql查询" class="headerlink" title="本地sql查询"></a>本地sql查询</h4><p>SQLQuery对象，使用普通sql实现查询</p><h3 id="Hibernate检索策略概念"><a href="#Hibernate检索策略概念" class="headerlink" title="Hibernate检索策略概念"></a>Hibernate检索策略概念</h3><p>hibernate检索策略分为两类：<br>立即查询：根据id查询，调用get方法，一调用get方法马上发送语句查询数据库</p><p><img src="/category/Hibernate/r1.png" alt="Hibernate"></p><p>延迟查询：根据id查询，还有load方法，调用load方法不会马上发送语句查询数据，只有得到对象里面的值时候才会发送语句查询数据库</p><p><img src="/category/Hibernate/r2.png" alt="Hibernate"></p><p>延迟查询：<br>类级别延迟：根据id查询返回实体类对象，调用load方法不会马上发送语句<br>关联级别延迟：查询某个客户，再查询这个客户的所有联系人，查询客户的所有联系人的过程是否需要延迟，这个过程称为关联级别延迟</p><p><img src="/category/Hibernate/r3.png" alt="Hibernate"></p><p>关联级别延迟操作：<br>在映射文件中进行配置实现：<br>根据客户得到所有的联系人，在客户映射文件中配置</p><p><img src="/category/Hibernate/r4.png" alt="Hibernate"></p><p>在set标签傻瓜使用属性<br>fetch：值：select（默认）<br>lazy：值：<br>true：延迟（默认）<br>false：不延迟，调用get后，发送两条sql语句<br>extra：极其延迟，极其懒惰，要什么值给什么值</p><h3 id="Hibernate批量抓取"><a href="#Hibernate批量抓取" class="headerlink" title="Hibernate批量抓取"></a>Hibernate批量抓取</h3><p>查询所有客户，返回list集合，遍历list集合，得到每个客户，得到每个客户的所有联系人<br>效率低：会发送很多sql语句<br><img src="/category/Hibernate/r5.png" alt="Hibernate"><br>在客户的映射文件中，set标签配置<br><img src="/category/Hibernate/r6.png" alt="Hibernate"><br>batch-size值：值越大，发送语句越少</p></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">----------------本文结束<i class="fa fa-heart"></i>感谢阅读----------------</div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> Goya</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://www.ysmjjsy.com/category/Hibernate/" title="SSH框架-Hibernate">https://www.ysmjjsy.com/category/Hibernate/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/SSH框架/" rel="tag"><i class="fa fa-tag"></i> SSH框架</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/category/Spring/" rel="next" title="SSH框架-Spring"><i class="fa fa-chevron-left"></i> SSH框架-Spring</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"></div></div></footer></div></article><div class="post-spread"><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5d44446d8ec752bd" async></script></div></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Goya"><p class="site-author-name" itemprop="name">Goya</p><p class="site-description motion-element" itemprop="description">愿你走出半生，归来仍是少年</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">34</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">46</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">8</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/GoyaDo" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/a773949603" target="_blank" title="CSDN"><i class="fa fa-fw fa-copyright"></i>CSDN</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/lemondeah/activities" target="_blank" title="知乎"><i class="fa fa-fw fa-zhihu"></i>知乎</a> </span><span class="links-of-author-item"><a href="https://weibo.com/u/6606679478" target="_blank" title="微博"><i class="fa fa-fw fa-weibo"></i>微博</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://me.csdn.net/sinyu890807" title="郭霖" target="_blank">郭霖</a></li><li class="links-of-blogroll-item"><a href="https://www.zhihu.com/people/huangsunting/activities" title="bravo1988" target="_blank">bravo1988</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Hibernate"><span class="nav-number">1.</span> <span class="nav-text">Hibernate</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ORM思想"><span class="nav-number">1.1.</span> <span class="nav-text">ORM思想</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hibernate入门"><span class="nav-number">1.2.</span> <span class="nav-text">Hibernate入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#实现添加操作"><span class="nav-number">1.2.1.</span> <span class="nav-text">实现添加操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate配置文件详解"><span class="nav-number">1.2.2.</span> <span class="nav-text">Hibernate配置文件详解</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Hibernate映射配置文件"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">Hibernate映射配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hibernate核心配置文件"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">Hibernate核心配置文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate核心api"><span class="nav-number">1.2.3.</span> <span class="nav-text">Hibernate核心api</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Configuration"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">Configuration</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SessionFactory"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">SessionFactory</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Session"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">Session</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Transaction"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">Transaction</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#解决配置文件没有提示问题"><span class="nav-number">1.2.4.</span> <span class="nav-text">解决配置文件没有提示问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实体类编写规则"><span class="nav-number">1.2.5.</span> <span class="nav-text">实体类编写规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate主键生成策略"><span class="nav-number">1.2.6.</span> <span class="nav-text">Hibernate主键生成策略</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实体类操作"><span class="nav-number">1.2.7.</span> <span class="nav-text">实体类操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate一级缓存"><span class="nav-number">1.2.8.</span> <span class="nav-text">Hibernate一级缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Hibernate缓存"><span class="nav-number">1.2.8.1.</span> <span class="nav-text">Hibernate缓存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#验证一级缓存存在"><span class="nav-number">1.2.8.2.</span> <span class="nav-text">验证一级缓存存在</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hibernate一级缓存执行过程"><span class="nav-number">1.2.8.3.</span> <span class="nav-text">Hibernate一级缓存执行过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hibernate一级缓存特性"><span class="nav-number">1.2.8.4.</span> <span class="nav-text">Hibernate一级缓存特性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate事务操作"><span class="nav-number">1.2.9.</span> <span class="nav-text">Hibernate事务操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Hibernate事务代码规范写法"><span class="nav-number">1.2.9.1.</span> <span class="nav-text">Hibernate事务代码规范写法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate绑定session"><span class="nav-number">1.2.10.</span> <span class="nav-text">Hibernate绑定session</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate的api使用"><span class="nav-number">1.2.11.</span> <span class="nav-text">Hibernate的api使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Query对象"><span class="nav-number">1.2.11.1.</span> <span class="nav-text">Query对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Criteria对象"><span class="nav-number">1.2.11.2.</span> <span class="nav-text">Criteria对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SQlQuery对象"><span class="nav-number">1.2.11.3.</span> <span class="nav-text">SQlQuery对象</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表与表之间的关系"><span class="nav-number">1.2.12.</span> <span class="nav-text">表与表之间的关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一对多操作"><span class="nav-number">1.2.13.</span> <span class="nav-text">一对多操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#一对多映射配置"><span class="nav-number">1.2.13.1.</span> <span class="nav-text">一对多映射配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一对多级联操作"><span class="nav-number">1.2.13.2.</span> <span class="nav-text">一对多级联操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一对多修改操作"><span class="nav-number">1.2.13.3.</span> <span class="nav-text">一对多修改操作</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多对多操作"><span class="nav-number">1.2.14.</span> <span class="nav-text">多对多操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#多对多映射配置"><span class="nav-number">1.2.14.1.</span> <span class="nav-text">多对多映射配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多对多级联保存"><span class="nav-number">1.2.14.2.</span> <span class="nav-text">多对多级联保存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多对多级联删除"><span class="nav-number">1.2.14.3.</span> <span class="nav-text">多对多级联删除</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#维护第三张表关系"><span class="nav-number">1.2.14.4.</span> <span class="nav-text">维护第三张表关系</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate查询方式"><span class="nav-number">1.2.15.</span> <span class="nav-text">Hibernate查询方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#对象导航查询"><span class="nav-number">1.2.15.1.</span> <span class="nav-text">对象导航查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OID查询"><span class="nav-number">1.2.15.2.</span> <span class="nav-text">OID查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hql查询"><span class="nav-number">1.2.15.3.</span> <span class="nav-text">hql查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#查询所有"><span class="nav-number">1.2.15.3.1.</span> <span class="nav-text">查询所有</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#条件查询"><span class="nav-number">1.2.15.3.2.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#排序查询"><span class="nav-number">1.2.15.3.3.</span> <span class="nav-text">排序查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分页查询"><span class="nav-number">1.2.15.3.4.</span> <span class="nav-text">分页查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#投影查询"><span class="nav-number">1.2.15.3.5.</span> <span class="nav-text">投影查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#聚合函数的使用"><span class="nav-number">1.2.15.3.6.</span> <span class="nav-text">聚合函数的使用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#QBC查询"><span class="nav-number">1.2.15.4.</span> <span class="nav-text">QBC查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#查询所有-1"><span class="nav-number">1.2.15.4.1.</span> <span class="nav-text">查询所有</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#条件查询-1"><span class="nav-number">1.2.15.4.2.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#排序查询-1"><span class="nav-number">1.2.15.4.3.</span> <span class="nav-text">排序查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分页查询-1"><span class="nav-number">1.2.15.4.4.</span> <span class="nav-text">分页查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#统计查询"><span class="nav-number">1.2.15.4.5.</span> <span class="nav-text">统计查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#离线查询"><span class="nav-number">1.2.15.4.6.</span> <span class="nav-text">离线查询</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HQL多表查询"><span class="nav-number">1.2.15.5.</span> <span class="nav-text">HQL多表查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#本地sql查询"><span class="nav-number">1.2.15.6.</span> <span class="nav-text">本地sql查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate检索策略概念"><span class="nav-number">1.2.16.</span> <span class="nav-text">Hibernate检索策略概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hibernate批量抓取"><span class="nav-number">1.2.17.</span> <span class="nav-text">Hibernate批量抓取</span></a></li></ol></li></ol></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019-09-18</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Goya</span></div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>function createtime(){var n=new Date("07/03/2018 14:13:22");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="网站已运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}var now=new Date;setInterval("createtime()",250)</script><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 网站总访客数 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人次 </span><span class="site-pv"><i class="fa fa-eye"></i> 总访问量 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer></div><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="https://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'BuVPeD8Q1vkGqU4nrrrSUa9y-gzGzoHsz',
        appKey: '0SU6m8Ctovo9j6oHFbNVyHPv',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });</script><script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html><script type="text/javascript" src="/js/src/love.js"></script><!-- rebuild by neat -->