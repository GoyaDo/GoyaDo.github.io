<!-- build time:Tue Oct 22 2019 21:12:38 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><meta name="google-site-verification" content="EmMIJLWJtXQxrrJkM-F8VfTiJjK7ASyFu9OBx-ZlSRo"><meta name="baidu-site-verification" content="XVGOi3sgWa"><script></script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="baidu-site-verification" content="Kljn7UFZcB"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="MyBatis"><link rel="alternate" href="/atom.xml" title="余生梦见皆是缘" type="application/atom+xml"><meta name="description" content="SSM框架-MyBatis"><meta name="keywords" content="MyBatis"><meta property="og:type" content="article"><meta property="og:title" content="SSM框架-MyBatis"><meta property="og:url" content="https://www.ysmjjsy.com/category/MyBatis/index.html"><meta property="og:site_name" content="余生梦见皆是缘"><meta property="og:description" content="SSM框架-MyBatis"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/0.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/a9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/b8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/c14.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d14.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/d15.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/e10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f14.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f15.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f16.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f17.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f18.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f19.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f20.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f21.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f22.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f23.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/f24.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g14.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/g15.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q7.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q8.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q9.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q10.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q11.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q12.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/q13.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/w1.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/w2.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/w3.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/w4.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/w5.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/w6.png"><meta property="og:image" content="https://www.ysmjjsy.com/category/MyBatis/w7.png"><meta property="og:updated_time" content="2019-09-19T07:09:08.984Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="SSM框架-MyBatis"><meta name="twitter:description" content="SSM框架-MyBatis"><meta name="twitter:image" content="https://www.ysmjjsy.com/category/MyBatis/1.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!0,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://www.ysmjjsy.com/category/MyBatis/"><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"6e2c9585"}),daovoice("update")</script><title>SSM框架-MyBatis | 余生梦见皆是缘</title><script>!function(e,t,a,n,c,s,o){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,s=t.createElement(a),o=t.getElementsByTagName(a)[0],s.async=1,s.src=n,o.parentNode.insertBefore(s,o)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-145122509-1","auto"),ga("send","pageview")</script><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?45ce68cbde829747ea3eed77723e1cf4";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://github.com/GoyaDo" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="https://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">余生梦见皆是缘</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archives"></i><br>归档</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://www.ysmjjsy.com/category/MyBatis/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Goya"><meta itemprop="description" content><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="余生梦见皆是缘"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">SSM框架-MyBatis</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-13T00:00:00+08:00">2018-10-13 </time><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于&#58;</span> <time title="更新于" itemprop="dateModified" datetime="2019-09-19T15:09:08+08:00">2019-09-19 </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SSM框架/" itemprop="url" rel="index"><span itemprop="name">SSM框架</span> </a></span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SSM框架/MyBatis/" itemprop="url" rel="index"><span itemprop="name">MyBatis</span> </a></span></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/category/MyBatis/#comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/category/MyBatis/" itemprop="commentCount"></span> </a></span><span class="post-meta-divider">|</span> <span class="page-pv"><i class="fa fa-file-o"></i> <span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">9.1k 字 </span><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">34 分钟</span></div><div class="post-description">SSM框架-MyBatis</div></div></header><div class="post-body" itemprop="articleBody"><h1 id="MyBatis"><a href="#MyBatis" class="headerlink" title="MyBatis"></a>MyBatis</h1><h2 id="JDBC编码问题"><a href="#JDBC编码问题" class="headerlink" title="JDBC编码问题"></a>JDBC编码问题</h2><p><strong><em>sql_table.sql:记录表结构</em></strong><br><strong><em>sql_data.sql:记录测试数据，在实际企业开发中，最后提供一个初始化数据脚本</em></strong></p><h3 id="原生态jdbc编程中的问题总结"><a href="#原生态jdbc编程中的问题总结" class="headerlink" title="原生态jdbc编程中的问题总结"></a>原生态jdbc编程中的问题总结</h3><p>代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.cj.mybatis.jdbc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdbcTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//数据库连接</span></span><br><span class="line">        Connection connection = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//预编译的Statement，使用预编译的Statement提高数据库的性能</span></span><br><span class="line">        PreparedStatement preparedStatement = <span class="keyword">null</span>;</span><br><span class="line">        <span class="comment">//结果集</span></span><br><span class="line">        ResultSet resultSet = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 加载数据库驱动</span></span><br><span class="line">            Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">            <span class="comment">// 通过驱动管理类获取数据库链接</span></span><br><span class="line">            connection = </span><br><span class="line">            DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/mybatis?characterEncoding=utf-8"</span>,</span><br><span class="line">                    <span class="string">"root"</span>, <span class="string">"123456"</span>);</span><br><span class="line">            <span class="comment">// 定义&lt;u&gt;sql&lt;/u&gt;语句 ?表示占位符</span></span><br><span class="line">            String sql = <span class="string">"select * from user where username = ?"</span>;</span><br><span class="line">            <span class="comment">// 获取预处理statement</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// 设置参数，第一个参数为sql语句中参数的序号（从1开始），第二个参数为设置的参数值</span></span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>, <span class="string">"王五"</span>);</span><br><span class="line">            <span class="comment">// 向数据库发出sql执行查询，查询出结果集</span></span><br><span class="line">            resultSet = preparedStatement.executeQuery();</span><br><span class="line">            <span class="comment">// 遍历查询结果集</span></span><br><span class="line">            <span class="keyword">while</span> (resultSet.next()) &#123;</span><br><span class="line">                System.out.println(resultSet.getString(<span class="string">"id"</span>) + <span class="string">"  "</span> + resultSet.getString(<span class="string">"username"</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (resultSet != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    resultSet.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated catch </span></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (preparedStatement != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    preparedStatement.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated catch </span></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    connection.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="comment">// TODO Auto-generated catch </span></span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//结果：</span></span><br><span class="line"><span class="comment">//26 王五</span></span><br></pre></td></tr></table></figure><p><strong>问题总结：</strong></p><ul><li>数据库连接，使用时创建，不适用立即释放，对数据库进行频繁连接开启和关闭，造成数据库资源浪费，影响数据库性能</li><li>将sql语句硬编码到java代码中，如果sql语句修改，需要重新编译java代码，不利于系统维护。<ul><li>设想：将sql语句配置在xml文件中，即使sql变化，不需要对java代码进行重新编译</li></ul></li><li>向preparedStatement中设置参数，对占位符位置和设置参数值，硬编码在java代码中<ul><li>设想：将sql语句及占位符和参数全部配置在xml中</li></ul></li><li>从resultSet中遍历结果集时，存在硬编码，将获取表的字段进行硬编码<ul><li>设想：将查询的结果集，自动映射成java对象</li></ul></li></ul><h2 id="MyBatis-1"><a href="#MyBatis-1" class="headerlink" title="MyBatis"></a>MyBatis</h2><h3 id="MyBatis是什么？"><a href="#MyBatis是什么？" class="headerlink" title="MyBatis是什么？"></a>MyBatis是什么？</h3><ul><li>mybatis是一个持久层框架，是apache下的顶级项目<ul><li>托管在github上</li></ul></li><li>mybatis让程序将主要精力放在sql上，通过mybatis提供的映射方式，自由灵活生成（半自动化，大部分需要程序员编写sql）满足需要的sql语句</li><li>mybatis可以将向preparedStatement中输入的参数自动进行输入映射，将查询结果集灵活映射成java对象（输出映射）</li></ul><h3 id="MyBatis框架"><a href="#MyBatis框架" class="headerlink" title="MyBatis框架"></a>MyBatis框架</h3><p><img src="/category/MyBatis/1.png" alt="MyBatis"></p><h3 id="入门程序"><a href="#入门程序" class="headerlink" title="入门程序"></a>入门程序</h3><h4 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h4><ul><li>根据用户id（主键）查询用户信息</li><li>根据用户名称模糊拆线呢用户信息</li><li>添加用户</li><li>删除用户</li><li>更新用户</li></ul><h4 id="log4j"><a href="#log4j" class="headerlink" title="log4j"></a>log4j</h4><p>在开发环境下日志级别要设置成DEBUG，生产环境设置成info或error</p><h4 id="工程结构"><a href="#工程结构" class="headerlink" title="工程结构"></a>工程结构</h4><p><img src="/category/MyBatis/2.png" alt="MyBatis"></p><h4 id="SqlMapConfig-xml"><a href="#SqlMapConfig-xml" class="headerlink" title="SqlMapConfig.xml"></a>SqlMapConfig.xml</h4><p>配置mybatis的运行环境，数据源，事务等</p><p><img src="/category/MyBatis/3.png" alt="MyBatis"></p><h4 id="根据用户id（主键）查询用户信息"><a href="#根据用户id（主键）查询用户信息" class="headerlink" title="根据用户id（主键）查询用户信息"></a>根据用户id（主键）查询用户信息</h4><h5 id="po类"><a href="#po类" class="headerlink" title="po类"></a>po类</h5><p><img src="/category/MyBatis/4.png" alt="MyBatis"></p><h5 id="映射文件"><a href="#映射文件" class="headerlink" title="映射文件"></a>映射文件</h5><p>映射文件命名：User.xml，mapper代理开发映射文件名称叫XXXMapper.xml，比如UserMapper.xml、ItemsMapper.xml<br>在映射文件中配置sql语句</p><p><img src="/category/MyBatis/5.png" alt="MyBatis"></p><h5 id="在SqlMapConfig中加载映射文件"><a href="#在SqlMapConfig中加载映射文件" class="headerlink" title="在SqlMapConfig中加载映射文件"></a>在SqlMapConfig中加载映射文件</h5><p><img src="/category/MyBatis/6.png" alt="MyBatis"></p><h5 id="程序编写"><a href="#程序编写" class="headerlink" title="程序编写"></a>程序编写</h5><p><img src="/category/MyBatis/7.png" alt="MyBatis"></p><h4 id="根据用户名称模糊查询用户信息"><a href="#根据用户名称模糊查询用户信息" class="headerlink" title="根据用户名称模糊查询用户信息"></a>根据用户名称模糊查询用户信息</h4><h5 id="映射文件-1"><a href="#映射文件-1" class="headerlink" title="映射文件"></a>映射文件</h5><p><img src="/category/MyBatis/8.png" alt="MyBatis"></p><p>这样可能引起sql注入</p><h5 id="测试类"><a href="#测试类" class="headerlink" title="测试类"></a>测试类</h5><p><img src="/category/MyBatis/9.png" alt="MyBatis"></p><p><img src="/category/MyBatis/0.png" alt="MyBatis"></p><h4 id="查询用户小结"><a href="#查询用户小结" class="headerlink" title="查询用户小结"></a>查询用户小结</h4><p>parameterType：在映射文件中通过parameterType指定输入参数的类型<br>resultType：在映射文件中通过resultType指定输出结果的类型</p><p><code>#{}</code>：表示占位符</p><p><code>${}</code>：表示拼接字符串，会引起sql注入，不建议使用<br>selectOne：表示查询出一条记录进行映射，如果使用selectOne，可以实现使用selectList也可以实现（list中只有一个对象）<br>selectList：表示查询出一个列表（多条记录 ）进行映射，如果使用selectList查询多条记录，不能使用selectOne</p><h4 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h4><h5 id="映射文件-2"><a href="#映射文件-2" class="headerlink" title="映射文件"></a>映射文件</h5><p>在User.xml中配置添加用户的Statement</p><p><img src="/category/MyBatis/a1.png" alt="MyBatis"></p><h5 id="测试类-1"><a href="#测试类-1" class="headerlink" title="测试类"></a>测试类</h5><p><img src="/category/MyBatis/a2.png" alt="MyBatis"></p><h4 id="主键返回"><a href="#主键返回" class="headerlink" title="主键返回"></a>主键返回</h4><h5 id="自增主键返回"><a href="#自增主键返回" class="headerlink" title="自增主键返回"></a>自增主键返回</h5><p>mysql自增主键，执行insert提交之前自动生成一个自增主键。<br>通过mysql函数获取到刚插入记录的自增主键：<br>LAST_INSERT_ID()<br>是insert之后调用此函数。</p><p><img src="/category/MyBatis/a3.png" alt="MyBatis"></p><p><img src="/category/MyBatis/a4.png" alt="MyBatis"></p><h5 id="非自增主键返回（使用uuid"><a href="#非自增主键返回（使用uuid" class="headerlink" title="非自增主键返回（使用uuid())"></a>非自增主键返回（使用uuid())</h5><p>使用mysql的uuid()函数生成主键，需要修改表中id字段类型为string，长度设置成35位。<br>执行思路：<br>先通过uuid()查询到主键，将主键输入 到sql语句中。<br>执行uuid()语句顺序相对于insert语句之前执行。</p><p><img src="/category/MyBatis/a5.png" alt="MyBatis"></p><p><strong>Oracle使用序列生成主键：</strong><br>首先自定义一个序列且用于生成主键，selectKey使用如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span>  <span class="attr">id</span>=<span class="string">"insertUser"</span> <span class="attr">parameterType</span>=<span class="string">"cn.cj.mybatis.po.User"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">resultType</span>=<span class="string">"java.lang.Integer"</span> <span class="attr">order</span>=<span class="string">"BEFORE"</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span>&gt;</span></span><br><span class="line">SELECT 自定义序列.NEXTVAL FROM DUAL</span><br><span class="line"><span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">insert into user(id,<span class="tag">&lt;<span class="name">u</span>&gt;</span>username<span class="tag">&lt;/<span class="name">u</span>&gt;</span>,birthday,sex,address) </span><br><span class="line">       values(#&#123;id&#125;,#&#123;<span class="tag">&lt;<span class="name">u</span>&gt;</span>username<span class="tag">&lt;/<span class="name">u</span>&gt;</span>&#125;,#&#123;birthday&#125;,#&#123;sex&#125;,#&#123;address&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure><p>注意这里使用的order是“BEFORE”</p><h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><h5 id="映射文件-3"><a href="#映射文件-3" class="headerlink" title="映射文件"></a>映射文件</h5><p><img src="/category/MyBatis/a6.png" alt="MyBatis"></p><h5 id="测试类-2"><a href="#测试类-2" class="headerlink" title="测试类"></a>测试类</h5><p><img src="/category/MyBatis/a7.png" alt="MyBatis"></p><h4 id="更新用户"><a href="#更新用户" class="headerlink" title="更新用户"></a>更新用户</h4><h5 id="映射文件-4"><a href="#映射文件-4" class="headerlink" title="映射文件"></a>映射文件</h5><p><img src="/category/MyBatis/a8.png" alt="MyBatis"></p><h5 id="测试类-3"><a href="#测试类-3" class="headerlink" title="测试类"></a>测试类</h5><p><img src="/category/MyBatis/a9.png" alt="MyBatis"></p><h3 id="MyBatis和Hibernate的本质区别-mapper"><a href="#MyBatis和Hibernate的本质区别-mapper" class="headerlink" title="MyBatis和Hibernate的本质区别-mapper"></a>MyBatis和Hibernate的本质区别-mapper</h3><h4 id="hibernate"><a href="#hibernate" class="headerlink" title="hibernate"></a>hibernate</h4><p>是一个标准ORM框架（对象关系映射）。入门门槛较高，不需要程序员写sql，sql语句自动生成<br>对sql进行优化、修改比较困难<br>应用场景：适用于需求变化不多的中小型项目，比如后台管理系统，erp、orm、oa</p><h4 id="mybatis"><a href="#mybatis" class="headerlink" title="mybatis"></a>mybatis</h4><p>专注sql本身，需要程序员自己编写sql语句，sql修改、优化比较方便，mybatis是一个不完全的ORM框架，虽然程序员自己写sql，mybatis也可以实现映射（输入映射、输出映射）<br>应用场景：适用于需求变化较多的项目，比如互联网项目</p><p><strong>企业进行技术选型，以低成本 高回报作为技术选型原则，根据项目组的技术力量进行选择</strong></p><h4 id="mybatis开发dao方法"><a href="#mybatis开发dao方法" class="headerlink" title="mybatis开发dao方法"></a>mybatis开发dao方法</h4><h5 id="SqlSesssion应用场合"><a href="#SqlSesssion应用场合" class="headerlink" title="SqlSesssion应用场合"></a>SqlSesssion应用场合</h5><p><strong><em>sqlSession使用范围</em></strong><br><strong>SqlSessionFactoryBuilder：</strong><br>通过SqlSessionFactoryBuilder创建会话工厂SqlSessionFactory<br>将SqlSessionBuilder当成一个工具类使用即可，不需要使用单例管理SqlSessionFactoryBuilder<br>在需要创建SqlSessionFactory时候，只需要new一次SqlSessionFactoryBuilder<br><strong>SqlSessionFactory：</strong><br>通过SqlSessionFactory创建SqlSession，通过单例模式管理SqlSessionFactory（工厂一旦创建，使用一个实例。<br>将来mybatis和spring整合后，使用单例模式管理SqlSessionFactory<br><strong>SqlSession：</strong><br>SqlSession是一个面向用户（程序员）的接口<br>SqlSession中提供了很多操作数据库的方法：如selectOne（返回单个对象）、selectList（返回单个或多个对象）<br>SqlSession是线程不安全的，在SqlSession实现类中除了有接口中的方法（操作数据库的方法）还有数据域属性<br><strong><em>SqlSession最佳应用场合在方法体内，定义局部变量使用。</em></strong></p><h4 id="原始dao开发方法（写dao接口和dao实现类）"><a href="#原始dao开发方法（写dao接口和dao实现类）" class="headerlink" title="原始dao开发方法（写dao接口和dao实现类）"></a>原始dao开发方法（写dao接口和dao实现类）</h4><p>程序员需要写dao接口和dao实现类<br>需要向dao实现类中注入SqlSessionFactory，在方法体内通过SqlSessionFactory创建SqlSession</p><h5 id="dao接口"><a href="#dao接口" class="headerlink" title="dao接口"></a>dao接口</h5><p><img src="/category/MyBatis/b1.png" alt="MyBatis"></p><h5 id="dao接口实现类"><a href="#dao接口实现类" class="headerlink" title="dao接口实现类"></a>dao接口实现类</h5><p><img src="/category/MyBatis/b2.png" alt="MyBatis"></p><h5 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h5><p><img src="/category/MyBatis/b3.png" alt="MyBatis"></p><h5 id="原始dao开发问题"><a href="#原始dao开发问题" class="headerlink" title="原始dao开发问题"></a>原始dao开发问题</h5><ul><li>dao的接口实现类方法中存在大量模板方法，设想能否将这些代码提取出来</li><li>在调用SqlSession方法时将statement的id硬编码了</li><li>调用SqlSession方法时传入的变量，由于SqlSession方法使用泛型，即使变量类型传入错误，在编译阶段也不报错，不利于开发</li></ul><h4 id="mapper代理方法（只需要mapper接口（相当于dao接口））"><a href="#mapper代理方法（只需要mapper接口（相当于dao接口））" class="headerlink" title="mapper代理方法（只需要mapper接口（相当于dao接口））"></a>mapper代理方法（只需要mapper接口（相当于dao接口））</h4><h5 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h5><p>编写映射文件<br>只需要编写mapper接口（相当于dao接口）<br>遵循一些开发规范：mybatis可以自动生成mapper接口实现类代理对象<br><strong>开发规范:</strong><br>在mapper.xml中namespace等于mapper接口地址</p><p><img src="/category/MyBatis/b4.png" alt="MyBatis"></p><p><img src="/category/MyBatis/b5.png" alt="MyBatis"></p><p>mapper.java接口中的方法名和mapper.xml中statement的id一致<br>mapper.java接口中的方法输入参数类型和mapper.xml中statement的parmeterType指定的类型一致<br>mapper.java接口中的方法返回值类型和mapper.xml中statement的resultType指定的类型一致</p><p><img src="/category/MyBatis/b6.png" alt="MyBatis"></p><p>总结：以上开发规范主要是对下边的代码进行统一生成</p><h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><p><img src="/category/MyBatis/b7.png" alt="MyBatis"></p><p><img src="/category/MyBatis/b8.png" alt="MyBatis"></p><p><strong>代理对象内部调用selectOne或selectList：</strong><br>如果mapper方法返回单个pojo对象（非集合对象），代理对象内部通过selectOne查询数据库<br>如果mapper方法返回集合对象，代理对象内部通过selectList查询数据库<br><strong>mapper接口方法参数只能有一个是否影响系统开发：</strong><br>mapper接口方法参数只能有一个，系统是否不利于扩展维护<br>系统框架中，dao层代码是被业务层公用的<br>即使mapper接口只有一个参数，可以使用包装类型的pojo满足不同的业务方法的需求<br>注意：持久层方法的参数可以包装类型、map…，service方法中建议不要使用包装类型（不利于业务层的可扩展性）</p><h3 id="SqlMapConfig"><a href="#SqlMapConfig" class="headerlink" title="SqlMapConfig"></a>SqlMapConfig</h3><p>mybatis的全局配置文件SqlMapConfig.xml配置内容：</p><ul><li>properties（属性）</li><li>settings（全局配置参数)</li><li>typeAliases（类型别名）</li><li>typeHandlers（类型处理器)</li><li>objectFactory（对象工厂）</li><li>plugins（插件)</li><li>environments（环境集合属性对象）：<ul><li>environment（环境子属性对象）：<ul><li>transactionManager（事务管理）</li><li>dataSource（数据源）</li></ul></li></ul></li><li>mappers（映射器）</li></ul><h4 id="Properties属性"><a href="#Properties属性" class="headerlink" title="Properties属性"></a>Properties属性</h4><p>将数据库连接参数单独配置在db.properties中，只需要在SqlMapConfig.xml中加载db.properties的属性值。<br>在SqlMapConfig中就不需要对数据库的连接参数硬编码<br>将数据库连接参数只配置在db.properties中，原因：方便对参数进行统一管理，其他xml可以引用该db.properties</p><p><img src="/category/MyBatis/c1.png" alt="MyBatis"></p><p>在sqlMapConfig.xml加载属性文件：</p><p><img src="/category/MyBatis/c2.png" alt="MyBatis"></p><p><strong>properties特性：</strong></p><ul><li><p>注意：</p><p>MyBatis 将按照下面的顺序来加载属性：<br>在 properties 元素体内定义的属性首先被读取。<br>然后会读取properties 元素中resource或 url 加载的属性，它会覆盖已读取的同名属性。<br>最后读取parameterType传递的属性，它会覆盖已读取的同名属性。</p></li><li><p>建议：</p><p>不要在properties元素体内添加任何属性值，只将属性值定义在properties文件中。<br>在properties文件中定义属性名要有一定的特殊性，如：XXXXX.XXXXX.XXXX</p></li><li><p>因此：</p><p>通过parameterType传递的属性具有最高优先级，resource或 url 加载的属性次之，<br>最低优先级的是 properties 元素体内定义的属性。</p></li></ul><h4 id="settings全局参数配置"><a href="#settings全局参数配置" class="headerlink" title="settings全局参数配置"></a>settings全局参数配置</h4><p>mybatis框架在运行时可以调整一些运行参数</p><p><img src="/category/MyBatis/c3.png" alt="MyBatis"></p><p><img src="/category/MyBatis/c4.png" alt="MyBatis"></p><p><img src="/category/MyBatis/c5.png" alt="MyBatis"></p><p><img src="/category/MyBatis/c6.png" alt="MyBatis"></p><h4 id="typeAliases（别名）"><a href="#typeAliases（别名）" class="headerlink" title="typeAliases（别名）"></a>typeAliases（别名）</h4><p>在mapper.xml中，定义很多的statement，statement需要parameterType指定输入参数的类型、需要resultType指定输出结果的映射类型<br>如果在指定类型时输入类型全路径，不方便进行开发，可以针对parameterType或resultType指定的类型定义一些别名，在mapper.xml中通过别名定义，方便开发</p><h5 id="mybatis默认支持的别名"><a href="#mybatis默认支持的别名" class="headerlink" title="mybatis默认支持的别名"></a>mybatis默认支持的别名</h5><p><img src="/category/MyBatis/c7.png" alt="MyBatis"></p><h5 id="自定义别名"><a href="#自定义别名" class="headerlink" title="自定义别名"></a>自定义别名</h5><p><strong>单个别名的定义：</strong></p><p><img src="/category/MyBatis/c8.png" alt="MyBatis"></p><p>引用别名：</p><p><img src="/category/MyBatis/c9.png" alt="MyBatis"></p><p><strong>批量别名的定义：</strong></p><p><img src="/category/MyBatis/c10.png" alt="MyBatis"></p><h4 id="typeHandlers（类型处理器）"><a href="#typeHandlers（类型处理器）" class="headerlink" title="typeHandlers（类型处理器）"></a>typeHandlers（类型处理器）</h4><p>mybatis中通过typeHandlers类型处理器完成jdbc类型和java类型的转换<br>通常情况下，mybatis提供的类型处理器满足日常需要，不需要自定义</p><p><img src="/category/MyBatis/c11.png" alt="MyBatis"></p><h4 id="mappers（映射配置）"><a href="#mappers（映射配置）" class="headerlink" title="mappers（映射配置）"></a>mappers（映射配置）</h4><p><strong>通过resource加载单个映射文件：</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--通过resource方法一次加载一个映射文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"mapper/UserMapper.xml"</span>/&gt;</span></span><br></pre></td></tr></table></figure><p><strong>通过mapper接口加载单个映射文件：</strong><br>规范：需要将mapper接口类名和mapper.xml映射文件保持一致，且在一个目录中<br>前提：使用mapper代理方法</p><p><img src="/category/MyBatis/c12.png" alt="MyBatis"></p><p><img src="/category/MyBatis/c13.png" alt="MyBatis"></p><p><strong><em>批量加载多个mapper：</em></strong></p><p><img src="/category/MyBatis/c14.png" alt="MyBatis"></p><h3 id="输入映射-输出映射"><a href="#输入映射-输出映射" class="headerlink" title="输入映射/输出映射"></a>输入映射/输出映射</h3><h4 id="输入映射"><a href="#输入映射" class="headerlink" title="输入映射"></a>输入映射</h4><p>通过parameterType指定输入参数的类型，类型可以是简单类型、hashmap、pojo包装类型</p><h5 id="传递pojo的包装对象"><a href="#传递pojo的包装对象" class="headerlink" title="传递pojo的包装对象"></a>传递pojo的包装对象</h5><p>完成用户信息的综合查询，需要传入查询条件（可能包括用户信息、其他信息、商品、订单的）<br>针对上边需求，建议使用自定义的包装类型的pojo<br>在包装类型的pojo中将复杂的查询条件包装进去<br>UserCustom是User的扩展类，子类</p><p><img src="/category/MyBatis/d1.png" alt="MyBatis"></p><p><strong>mapper.xml</strong><br>在UserMapper.xml中定义用户信息综合查询（查询条件复杂，通过高级查询进行复杂关联查询）</p><p><img src="/category/MyBatis/d2.png" alt="MyBatis"></p><p><strong>mapper.java</strong></p><p><img src="/category/MyBatis/d3.png" alt="MyBatis"></p><p><strong>测试代码：</strong></p><p><img src="/category/MyBatis/d4.png" alt="MyBatis"></p><h5 id="传递HashMap"><a href="#传递HashMap" class="headerlink" title="传递HashMap"></a>传递HashMap</h5><p><img src="/category/MyBatis/d5.png" alt="MyBatis"></p><p>上边红色标注的是hashmap的key</p><p><img src="/category/MyBatis/d6.png" alt="MyBatis"></p><h4 id="输出映射"><a href="#输出映射" class="headerlink" title="输出映射"></a>输出映射</h4><h5 id="resultType"><a href="#resultType" class="headerlink" title="resultType"></a>resultType</h5><p>使用resultType进行输出映射，只有查询出来的列名和pojo中的属性名一致，该列才可以映射成功<br>如果查询出来的列名和pojo中的属性名全部不一致，没有创建pojo对象<br>只要查询出来的列名和pojo中的属性有一个一致，就会创建pojo对象</p><p><strong>输出简单类型：</strong><br>用户信息的综合查询列表总数，通过查询总数和上边用户综合查询列表才可以实现分页<br><strong><em>mapper.xml</em></strong></p><p><img src="/category/MyBatis/d7.png" alt="MyBatis"></p><p><strong><em>mapper.java</em></strong></p><p><img src="/category/MyBatis/d8.png" alt="MyBatis"></p><p><strong><em>测试：</em></strong></p><p><img src="/category/MyBatis/d9.png" alt="MyBatis"></p><p><strong><em>总结</em></strong><br>查询出来的结果集只有一行切一列，可以使用简单类型进行输出映射</p><p><strong>输出pojo对象和pojo列表：</strong><br>不管是输出pojo单个对象还是一个列表（list中包括pojo），在mapper.xml中resultType指定的类型是一样的。<br>在mapper.java指定的方法返回值类型不一样：<br>输出单个pojo对象，方法返回值是单个对象类型</p><p><img src="/category/MyBatis/d10.png" alt="MyBatis"></p><p>输出pojo对象list，方法返回值是List<code>&lt;pojo&gt;</code></p><p><img src="/category/MyBatis/d11.png" alt="MyBatis"></p><p>生成的动态代理对象中是根据mapper方法的返回值类型确定是调用selectOne(返回单个对象调用)还是selectList （返回集合对象调用 ）<br><strong>输出hashmap：</strong><br>输出pojo对象可以改用hashmap输出类型，将输出的字段名称作为map的key，value为字段值。</p><h5 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h5><p>mybatis中使用resultMap完成高级输出结果映射<br><strong>使用方法：</strong><br>如果查询出来的列名和pojo的属性名不一致，通过定义一个resultMap对列名和pojo属性名之间做一个映射关系</p><ul><li>定义reslutMap</li><li>使用resultMap作为statement的输出映射类型</li></ul><p>将下边的sql使用User完成映射<br>SELECT id id<em>,username username</em> FROM USER WHERE id=#{value}<br>User类中属性名和上边查询列名不一致。<br><strong>定义resultMap：</strong></p><p><img src="/category/MyBatis/d12.png" alt="MyBatis"></p><p><strong>使用resultMap作为statement的输出映射关系：</strong></p><p><img src="/category/MyBatis/d13.png" alt="MyBatis"></p><p><strong>mapper.java</strong></p><p><img src="/category/MyBatis/d14.png" alt="MyBatis"></p><p><strong>测试：</strong></p><p><img src="/category/MyBatis/d15.png" alt="MyBatis"></p><p><strong>总结</strong><br>使用resultType进行输出映射，只有查询出来的列名和pojo中的属性名一致，该列才可以映射成功。<br>如果查询出来的列名和pojo的属性名不一致，通过定义一个resultMap对列名和pojo属性名之间作一个映射关系。</p><h3 id="动态sql"><a href="#动态sql" class="headerlink" title="动态sql"></a>动态sql</h3><h4 id="什么是动态sql"><a href="#什么是动态sql" class="headerlink" title="什么是动态sql"></a>什么是动态sql</h4><p>mybatis核心对sql语句进行灵活操作，通过表达式进行判断，对sql进行灵活拼接、组装<br><strong>需求：</strong><br>用户信息综合查询列表和用户信息查询列表总数这两个statement的定义使用动态sql<br>对查询条件进行判断，如果参数不为空才进行查询条件拼接<br>mapper.xml</p><p><img src="/category/MyBatis/e1.png" alt="MyBatis"></p><p><img src="/category/MyBatis/e2.png" alt="MyBatis"></p><p>测试代码：</p><p><img src="/category/MyBatis/e3.png" alt="MyBatis"></p><h4 id="sql片段"><a href="#sql片段" class="headerlink" title="sql片段"></a>sql片段</h4><p><strong>定义：</strong><br>将上边实现的动态sql判断代码块抽取出来，组成一个sql片段，其他的statement中就可以引用这个sql</p><p><img src="/category/MyBatis/e4.png" alt="MyBatis"></p><p><strong>引用：</strong></p><p><img src="/category/MyBatis/e5.png" alt="MyBatis"></p><p><img src="/category/MyBatis/e6.png" alt="MyBatis"></p><h4 id="foreach"><a href="#foreach" class="headerlink" title="foreach"></a>foreach</h4><p>向sql传递数组或List，mybatis使用foreach解析<br><strong>需求：</strong><br>在用户查询列表和查询总数的statement中增加多个id输入查询。<br>sql语句如下：<br>两种方法：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> <span class="keyword">id</span>=<span class="number">1</span> <span class="keyword">OR</span> <span class="keyword">id</span>=<span class="number">10</span> <span class="keyword">OR</span> <span class="keyword">id</span>=<span class="number">16</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> <span class="keyword">USER</span> <span class="keyword">WHERE</span> <span class="keyword">id</span> <span class="keyword">IN</span>(<span class="number">1</span>,<span class="number">10</span>,<span class="number">16</span>)</span><br></pre></td></tr></table></figure><p><strong>在输入参数类型中添加<code>List&lt;Integer&gt;</code>ids传入多个id</strong></p><p><img src="/category/MyBatis/e7.png" alt="MyBatis"></p><p><strong>修改mapper.xml</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WHERE id=1 OR id=10 OR id=16</span><br></pre></td></tr></table></figure><p>在查询条件中，查询条件定义成一个sql片段，需要修改sql片段。</p><p><img src="/category/MyBatis/e8.png" alt="MyBatis"></p><p><strong>测试代码：</strong></p><p><img src="/category/MyBatis/e9.png" alt="MyBatis"></p><p><strong>另外一个sql的实现：</strong></p><p><img src="/category/MyBatis/e10.png" alt="MyBatis"></p><h3 id="高级映射"><a href="#高级映射" class="headerlink" title="高级映射"></a>高级映射</h3><h4 id="订单商品数据模型"><a href="#订单商品数据模型" class="headerlink" title="订单商品数据模型"></a>订单商品数据模型</h4><p><img src="/category/MyBatis/f1.png" alt="MyBatis"></p><h5 id="数据模型分析思路"><a href="#数据模型分析思路" class="headerlink" title="数据模型分析思路"></a>数据模型分析思路</h5><p>1、每张表记录的数据内容<br>分模块对每张表记录的内容进行熟悉，相当 于你学习系统 需求（功能）的过程。<br>2、每张表重要的字段设置<br>非空字段、外键字段<br>3、数据库级别表与表之间的关系<br>外键关系<br>4、表与表之间的业务关系<br>在分析表与表之间的业务关系时一定要建立 在某个业务意义基础上去分析。</p><h5 id="数据模型分析"><a href="#数据模型分析" class="headerlink" title="数据模型分析"></a>数据模型分析</h5><p><img src="/category/MyBatis/f2.png" alt="MyBatis"></p><p>用户表user：<br>记录了购买商品的用户信息<br>订单表：orders<br>记录了用户所创建的订单（购买商品的订单）<br>订单明细表：orderdetail：<br>记录了订单的详细信息即购买商品的信息<br>商品表：items<br>记录了商品信息<br>表与表之间的业务关系：<br>在分析表与表之间的业务关系时需要建立 在某个业务意义基础上去分析。<br>先分析数据级别之间有关系的表之间的业务关系：<br>usre和orders：<br>user——&gt;orders：一个用户可以创建多个订单，一对多<br>orders—-&gt;user：一个订单只由一个用户创建，一对一<br>orders和orderdetail：<br>orders—-》orderdetail：一个订单可以包括 多个订单明细，因为一个订单可以购买多个商品，每个商品的购买信息在orderdetail记录，一对多关系<br>orderdetail—&gt; orders：一个订单明细只能包括在一个订单中，一对一<br>orderdetail和itesm：<br>orderdetail—-》itesms：一个订单明细只对应一个商品信息，一对一<br>items—&gt; orderdetail:一个商品可以包括在多个订单明细 ，一对多<br>再分析数据库级别没有关系的表之间是否有业务关系：<br>orders和items：<br>orders和items之间可以通过orderdetail表建立 关系。</p><h4 id="一对一查询"><a href="#一对一查询" class="headerlink" title="一对一查询"></a>一对一查询</h4><h5 id="需求-1"><a href="#需求-1" class="headerlink" title="需求"></a>需求</h5><p>查询订单信息，关联查询创建订单的用户信息</p><h5 id="resultType-1"><a href="#resultType-1" class="headerlink" title="resultType"></a>resultType</h5><h6 id="sql语句"><a href="#sql语句" class="headerlink" title="sql语句"></a>sql语句</h6><p>确定查询的主表：订单表<br>确定查询的关联表：用户表<br>关联查询使用内链接？还是外链接？<br>由于orders表中有一个外键（user_id），通过外键关联查询用户表只能查询出一条记录，可以使用内链接。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  orders.* ,</span><br><span class="line">  USER.username,</span><br><span class="line">  USER.sex,</span><br><span class="line">  USER.address </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  orders,</span><br><span class="line">  <span class="keyword">USER</span> </span><br><span class="line"><span class="keyword">WHERE</span> orders.user_id = user.id</span><br></pre></td></tr></table></figure><h6 id="创建pojo"><a href="#创建pojo" class="headerlink" title="创建pojo"></a>创建pojo</h6><p>将上边sql查询的结果映射到pojo中，pojo中必须包括所有查询列名。<br>原始的Orders.java不能映射全部字段，需要新创建的pojo。<br>创建 一个pojo继承包括查询字段较多的po类。</p><p><img src="/category/MyBatis/f3.png" alt="MyBatis"></p><h6 id="mapper-xml"><a href="#mapper-xml" class="headerlink" title="mapper.xml"></a>mapper.xml</h6><p><img src="/category/MyBatis/f4.png" alt="MyBatis"></p><h6 id="mapper-java"><a href="#mapper-java" class="headerlink" title="mapper.java"></a>mapper.java</h6><p><img src="/category/MyBatis/f5.png" alt="MyBatis"></p><h5 id="resultMap-1"><a href="#resultMap-1" class="headerlink" title="resultMap"></a>resultMap</h5><h6 id="sql语句-1"><a href="#sql语句-1" class="headerlink" title="sql语句"></a>sql语句</h6><p>同resultType实现的sql</p><h6 id="使用resultMap映射的思路"><a href="#使用resultMap映射的思路" class="headerlink" title="使用resultMap映射的思路"></a>使用resultMap映射的思路</h6><p>使用resultMap将查询结果中的订单信息映射到Orders对象中，在orders类中添加User属性，将关联查询出来的用户信息映射到orders对象中的user属性中。</p><h6 id="需要Orders类中添加user属性"><a href="#需要Orders类中添加user属性" class="headerlink" title="需要Orders类中添加user属性"></a>需要Orders类中添加user属性</h6><p><img src="/category/MyBatis/f6.png" alt="MyBatis">]</p><h6 id="mapper-xml-1"><a href="#mapper-xml-1" class="headerlink" title="mapper.xml"></a>mapper.xml</h6><p><strong>定义resultMap</strong></p><p><img src="/category/MyBatis/f7.png" alt="MyBatis"></p><p><strong>statement定义</strong></p><p><img src="/category/MyBatis/f8.png" alt="MyBatis"></p><h6 id="mapper-java-1"><a href="#mapper-java-1" class="headerlink" title="mapper.java"></a>mapper.java</h6><p><img src="/category/MyBatis/f9.png" alt="MyBatis"></p><h5 id="resultType和resultMap实现一对一查询小结"><a href="#resultType和resultMap实现一对一查询小结" class="headerlink" title="resultType和resultMap实现一对一查询小结"></a>resultType和resultMap实现一对一查询小结</h5><p>实现一对一查询：<br>resultType：使用resultType实现较为简单，如果pojo中没有包括查询出来的列名，需要增加列名对应的属性，即可完成映射。<br>如果没有查询结果的特殊要求建议使用resultType。<br>resultMap：需要单独定义resultMap，实现有点麻烦，如果对查询结果有特殊的要求，使用resultMap可以完成将关联查询映射pojo的属性中。<br>resultMap可以实现延迟加载，resultType无法实现延迟加载。</p><h4 id="一对多查询"><a href="#一对多查询" class="headerlink" title="一对多查询"></a>一对多查询</h4><h5 id="需求-2"><a href="#需求-2" class="headerlink" title="需求"></a>需求</h5><p>查询订单及订单明细的信息</p><h5 id="sql语句-2"><a href="#sql语句-2" class="headerlink" title="sql语句"></a>sql语句</h5><p>确定主查询表：订单表<br>确定关联查询表：订单明细表<br>在一对一查询基础上添加订单明细表关联即可。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">  orders.* ,</span><br><span class="line">  USER.username,</span><br><span class="line">  USER.sex,</span><br><span class="line">  USER.address,</span><br><span class="line">  orderdetail.id orderdetail_id,</span><br><span class="line">  orderdetail.items_id,</span><br><span class="line">  orderdetail.items_num,</span><br><span class="line">  orderdetail.orders_id</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  orders,</span><br><span class="line">  <span class="keyword">USER</span>,</span><br><span class="line">  orderdetail</span><br><span class="line"><span class="keyword">WHERE</span> orders.user_id = user.id <span class="keyword">AND</span> orderdetail.orders_id=orders.id</span><br></pre></td></tr></table></figure><h5 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h5><p>使用resultType将上边的 查询结果映射到pojo中，订单信息的就是重复</p><p><img src="/category/MyBatis/f10.png" alt="MyBatis"></p><p>要求：<br>对orders映射不能出现重复记录。<br>在orders.java类中添加List<orderdetail>orderDetails属性。<br>最终会将订单信息映射到orders中，订单所对应的订单明细映射到orders中的orderDetails属性中。</orderdetail></p><p><img src="/category/MyBatis/f11.png" alt="MyBatis"></p><p>映射成的orders记录数为两条（orders信息不重复）<br>每个orders中的orderDetails属性存储了该 订单所对应的订单明细。</p><h5 id="在orders中添加list订单明细属性"><a href="#在orders中添加list订单明细属性" class="headerlink" title="在orders中添加list订单明细属性"></a>在orders中添加list订单明细属性</h5><p><img src="/category/MyBatis/f12.png" alt="MyBatis"></p><h5 id="mapper-xml-2"><a href="#mapper-xml-2" class="headerlink" title="mapper.xml"></a>mapper.xml</h5><p><img src="/category/MyBatis/f13.png" alt="MyBatis"></p><h5 id="resultMap定义"><a href="#resultMap定义" class="headerlink" title="resultMap定义"></a>resultMap定义</h5><p><img src="/category/MyBatis/f14.png" alt="MyBatis"></p><h5 id="mapper-java-2"><a href="#mapper-java-2" class="headerlink" title="mapper.java"></a>mapper.java</h5><p><img src="/category/MyBatis/f15.png" alt="MyBatis"></p><h5 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h5><p>mybatis使用resultMap的collection对关联查询的多条记录映射到一个list集合属性中。<br>使用resultType实现：<br>将订单明细映射到orders中的orderdetails中，需要自己处理，使用双重循环遍历，去掉重复记录，将订单明细放在orderdetails中。</p><h4 id="多对多查询"><a href="#多对多查询" class="headerlink" title="多对多查询"></a>多对多查询</h4><h5 id="需求-3"><a href="#需求-3" class="headerlink" title="需求"></a>需求</h5><p>查询用户及用户购买商品信息</p><h5 id="sql语句-3"><a href="#sql语句-3" class="headerlink" title="sql语句"></a>sql语句</h5><p><img src="/category/MyBatis/f16.png" alt="MyBatis"></p><h5 id="映射思路"><a href="#映射思路" class="headerlink" title="映射思路"></a>映射思路</h5><p>将用户信息映射到user中</p><p>在user类添加订单列表属性<code>List&lt;Orders&gt;oderlist</code>,将用户创建的订单映射到orderslist</p><p>在Orders中添加订单明细列表属性<code>List&lt;OrderDetail&gt;oderdetails</code>,将订单的明细映射到oderdetails</p><p>在OrderDetail中添加Idems属性，将订单明细对应的商品映射到items</p><h5 id="mapper-xml-3"><a href="#mapper-xml-3" class="headerlink" title="mapper.xml"></a>mapper.xml</h5><p><img src="/category/MyBatis/f17.png" alt="MyBatis"></p><h5 id="resultMap定义-1"><a href="#resultMap定义-1" class="headerlink" title="resultMap定义"></a>resultMap定义</h5><p><img src="/category/MyBatis/f18.png" alt="MyBatis"></p><h5 id="mapper-java-3"><a href="#mapper-java-3" class="headerlink" title="mapper.java"></a>mapper.java</h5><p><img src="/category/MyBatis/f19.png" alt="MyBatis"></p><h5 id="多对多查询总结"><a href="#多对多查询总结" class="headerlink" title="多对多查询总结"></a>多对多查询总结</h5><p>将查询用户购买的商品信息明细清单，（用户名、用户地址、购买商品名称、购买商品时间、购买商品数量）<br>针对上边的需求就使用resultType将查询到的记录映射到一个扩展的pojo中，很简单实现明细清单的功能。<br>一对多是多对多的特例，如下需求：<br>查询用户购买的商品信息，用户和商品的关系是多对多关系。<br>需求1：<br>查询字段：用户账号、用户名称、用户性别、商品名称、商品价格(最常见)<br>企业开发中常见明细列表，用户购买商品明细列表，<br>使用resultType将上边查询列映射到pojo输出。<br>需求2：<br>查询字段：用户账号、用户名称、购买商品数量、商品明细（鼠标移上显示明细）<br>使用resultMap将用户购买的商品明细列表映射到user对象中。<br>总结：<br>使用resultMap是针对那些对查询结果映射有特殊要求的功能，，比如特殊要求映射成list中包括 多个list。</p><h5 id="resultMap总结"><a href="#resultMap总结" class="headerlink" title="resultMap总结"></a>resultMap总结</h5><p>resultType：<br>作用：<br>将查询结果按照sql列名pojo属性名一致性映射到pojo中。<br>场合：<br>常见一些明细记录的展示，比如用户购买商品明细，将关联查询信息全部展示在页面时，此时可直接使用resultType将每一条记录映射到pojo中，在前端页面遍历list（list中是pojo）即可。<br>resultMap：<br>使用association和collection完成一对一和一对多高级映射（对结果有特殊的映射要求）。<br>association：<br>作用：<br>将关联查询信息映射到一个pojo对象中。<br>场合：<br>为了方便查询关联信息可以使用association将关联订单信息映射为用户对象的pojo属性中，比如：查询订单及关联用户信息。<br>使用resultType无法将查询结果映射到pojo对象的pojo属性中，根据对结果集查询遍历的需要选择使用resultType还是resultMap。<br>collection：<br>作用：<br>将关联查询信息映射到一个list集合中。<br>场合：<br>为了方便查询遍历关联信息可以使用collection将关联信息映射到list集合中，比如：查询用户权限范围模块及模块下的菜单，可使用collection将模块映射到模块list中，将菜单列表映射到模块对象的菜单list属性中，这样的作的目的也是方便对查询结果集进行遍历查询。<br>如果使用resultType无法将查询结果映射到list集合中。</p><h3 id="延迟加载"><a href="#延迟加载" class="headerlink" title="延迟加载"></a>延迟加载</h3><h4 id="什么是延迟加载"><a href="#什么是延迟加载" class="headerlink" title="什么是延迟加载"></a>什么是延迟加载</h4><p>resultMap可以实现高级映射（使用association、collection实现一对一及一对多映射），association、collection具备延迟加载功能。<br>需求：<br>如果查询订单并且关联查询用户信息。如果先查询订单信息即可满足要求，当我们需要查询用户信息时再查询用户信息。把对用户信息的按需去查询就是延迟加载。<br>延迟加载：先从单表查询、需要时再从关联表去关联查询，大大提高 数据库性能，因为查询单表要比关联查询多张表速度要快。</p><h4 id="使用association实现延迟加载"><a href="#使用association实现延迟加载" class="headerlink" title="使用association实现延迟加载"></a>使用association实现延迟加载</h4><h5 id="需求-4"><a href="#需求-4" class="headerlink" title="需求"></a>需求</h5><p>查询订单并且关联查询用户信息</p><h5 id="mapper-xml-4"><a href="#mapper-xml-4" class="headerlink" title="mapper.xml"></a>mapper.xml</h5><p>需要定义两个mapper的方法对应的statement。<br>1、只查询订单信息<br>SELECT * FROM orders<br>在查询订单的statement中使用association去延迟加载（执行）下边的satatement(关联查询用户信息)<br><img src="/category/MyBatis/f20.png" alt="MyBatis"><br>2、关联查询用户信息<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;通过上边查询到的订单信息中user_id去关联查询用户信息<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;使用UserMapper.xml中的findUserById</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"findUserById"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"user"</span>&gt;</span></span><br><span class="line">	SELECT * FROM USER WHERE id=#&#123;value&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上边先去执行findOrdersUserLazyLoading，当需要去查询用户的时候再去执行findUserById，通过resultMap的定义将延迟加载执行配置起来。</p><h5 id="延迟加载resultMap"><a href="#延迟加载resultMap" class="headerlink" title="延迟加载resultMap"></a>延迟加载resultMap</h5><p><img src="/category/MyBatis/f21.png" alt="MyBatis"></p><h5 id="mapper-java-4"><a href="#mapper-java-4" class="headerlink" title="mapper.java"></a>mapper.java</h5><p><img src="/category/MyBatis/f22.png" alt="MyBatis"></p><h5 id="测试："><a href="#测试：" class="headerlink" title="测试："></a>测试：</h5><p>1、执行上边mapper方法（findOrdersUserLazyLoading），内部去调用cn.itcast.mybatis.mapper.OrdersMapperCustom中的findOrdersUserLazyLoading只查询orders信息（单表）。<br>2、在程序中去遍历上一步骤查询出的List<orders>，当我们调用Orders中的getUser方法时，开始进行延迟加载。<br>3、延迟加载，去调用UserMapper.xml中findUserbyId这个方法获取用户信息。</orders></p><p><strong>延迟加载配置：</strong><br>mybatis默认没有开启延迟加载，需要在SqlMapConfig.xml中setting配置。<br>在mybatis核心配置文件中配置：<br>lazyLoadingEnabled、aggressiveLazyLoading<br><img src="/category/MyBatis/f23.png" alt="MyBatis"><br>在SqlMapConfig.xml中配置：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--全局配置参数，需要时再设置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--打开延迟加载的开关--&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"lazyLoadingEnabled"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">  	<span class="comment">&lt;!--将积极加载改为消极加载，即按需要加载--&gt;</span></span><br><span class="line">  	<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">"aggressiveLazyLoading"</span> <span class="attr">value</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">setting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>代码：</strong><br><img src="/category/MyBatis/f24.png" alt="MyBatis"></p><h5 id="延迟加载思考"><a href="#延迟加载思考" class="headerlink" title="延迟加载思考"></a>延迟加载思考</h5><p>不使用mybatis提供的association及collection中的延迟加载功能，如何实现延迟加载？？<br>实现方法如下：<br>定义两个mapper方法：<br>1、查询订单列表<br>2、根据用户id查询用户信息<br>实现思路：<br>先去查询第一个mapper方法，获取订单信息列表<br>在程序中（service），按需去调用第二个mapper方法去查询用户信息。<br>总之：<br>使用延迟加载方法，先去查询简单的sql（最好单表，也可以关联查询），再去按需要加载关联查询的其它信息。</p><h3 id="查询缓存"><a href="#查询缓存" class="headerlink" title="查询缓存"></a>查询缓存</h3><h4 id="什么是查询缓存"><a href="#什么是查询缓存" class="headerlink" title="什么是查询缓存"></a>什么是查询缓存</h4><p>mybatis提供查询缓存，用于减轻数据压力，提高数据库性能。<br>mybaits提供一级缓存，和二级缓存。<br><img src="/category/MyBatis/g1.png" alt="MyBatis"><br>一级缓存是SqlSession级别的缓存。在操作数据库时需要构造 sqlSession对象，在对象中有一个数据结构（HashMap）用于存储缓存数据。不同的sqlSession之间的缓存数据区域（HashMap）是互相不影响的。<br>二级缓存是mapper级别的缓存，多个SqlSession去操作同一个Mapper的sql语句，多个SqlSession可以共用二级缓存，二级缓存是跨SqlSession的。<br>为什么要用缓存？<br>如果缓存中有数据就不用从数据库中获取，大大提高系统性能。</p><h4 id="一级缓存"><a href="#一级缓存" class="headerlink" title="一级缓存"></a>一级缓存</h4><h5 id="一级缓存工作原理"><a href="#一级缓存工作原理" class="headerlink" title="一级缓存工作原理"></a>一级缓存工作原理</h5><p><img src="/category/MyBatis/g2.png" alt="MyBatis"></p><p>第一次发起查询用户id为1的用户信息，先去找缓存中是否有id为1的用户信息，如果没有，从数据库查询用户信息。<br>得到用户信息，将用户信息存储到一级缓存中<br>如果sqlSession去执行commit操作（执行插入、更新、删除），清空SqlSession中的一级缓存，这样做的目的为了让缓存中存储的是最新的信息，避免脏读。<br>第二次发起查询用户id为1的用户信息，先去找缓存中是否有id为1的用户信息，缓存中有，直接从缓存中获取用户信息。</p><h5 id="一级缓存测试"><a href="#一级缓存测试" class="headerlink" title="一级缓存测试"></a>一级缓存测试</h5><p>mybatis默认支持一级缓存，不需要在配置文件去配置。<br>按照上边一级缓存原理步骤去测试。</p><p><img src="/category/MyBatis/g3.png" alt="MyBatis"></p><h5 id="一级缓存应用"><a href="#一级缓存应用" class="headerlink" title="一级缓存应用"></a>一级缓存应用</h5><p>正式开发，是将mybatis和spring进行整合开发，事务控制在service中。<br>一个service方法中包括 很多mapper方法调用。<br>service{<br>//开始执行时，开启事务，创建SqlSession对象<br>//第一次调用mapper的方法findUserById(1)<br>//第二次调用mapper的方法findUserById(1)，从一级缓存中取数据<br>//方法结束，sqlSession关闭<br>}<br>如果是执行两次service调用查询相同 的用户信息，不走一级缓存，因为session方法结束，sqlSession就关闭，一级缓存就清空。</p><h4 id="二级缓存"><a href="#二级缓存" class="headerlink" title="二级缓存"></a>二级缓存</h4><h5 id="二级缓存原理"><a href="#二级缓存原理" class="headerlink" title="二级缓存原理"></a>二级缓存原理</h5><p><img src="/category/MyBatis/g4.png" alt="MyBatis"><br>首先开启mybatis的二级缓存。<br>sqlSession1去查询用户id为1的用户信息，查询到用户信息会将查询数据存储到二级缓存中。<br>如果SqlSession3去执行相同 mapper下sql，执行commit提交，清空该 mapper下的二级缓存区域的数据。<br>sqlSession2去查询用户id为1的用户信息，去缓存中找是否存在数据，如果存在直接从缓存中取出数据。<br>二级缓存与一级缓存区别，二级缓存的范围更大，多个sqlSession可以共享一个UserMapper的二级缓存区域。<br>UserMapper有一个二级缓存区域（按namespace分） ，其它mapper也有自己的二级缓存区域（按namespace分）。<br>每一个namespace的mapper都有一个二缓存区域，两个mapper的namespace如果相同，这两个mapper执行sql查询到数据将存在相同 的二级缓存区域中。</p><h5 id="开启二级缓存"><a href="#开启二级缓存" class="headerlink" title="开启二级缓存"></a>开启二级缓存</h5><p>mybaits的二级缓存是mapper范围级别，除了在SqlMapConfig.xml设置二级缓存的总开关，还要在具体的mapper.xml中开启二级缓存。<br>在核心配置文件SqlMapConfig.xml中加入<br><code>&lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt;</code><br><img src="/category/MyBatis/g5.png" alt="MyBatis"><br><img src="/category/MyBatis/g6.png" alt="MyBatis"><br>在UserMapper.xml中开启二缓存，UserMapper.xml下的sql执行完成会存储到它的缓存区域（HashMap）。<br><img src="/category/MyBatis/g7.png" alt="MyBatis"></p><h5 id="调用pojo类实现序列化接口"><a href="#调用pojo类实现序列化接口" class="headerlink" title="调用pojo类实现序列化接口"></a>调用pojo类实现序列化接口</h5><p><img src="/category/MyBatis/g8.png" alt="MyBatis"><br>为了将缓存数据取出执行反序列化操作，因为二级缓存数据存储介质多种多样，不一样在内存。</p><h5 id="测试方法"><a href="#测试方法" class="headerlink" title="测试方法"></a>测试方法</h5><p><img src="/category/MyBatis/g9.png" alt="MyBatis"></p><h5 id="userCache配置"><a href="#userCache配置" class="headerlink" title="userCache配置"></a>userCache配置</h5><p>在statement中设置useCache=false可以禁用当前select语句的二级缓存，即每次查询都会发出sql去查询，默认情况是true，即该sql使用二级缓存。<br><code>&lt;select id=&quot;findOrderListResultMap&quot; resultMap=&quot;ordersUserMap&quot; useCache=&quot;false&quot;&gt;</code><br>总结：针对每次查询都需要最新的数据sql，要设置成useCache=false，禁用二级缓存。</p><h5 id="刷新缓存（就是清空缓存）"><a href="#刷新缓存（就是清空缓存）" class="headerlink" title="刷新缓存（就是清空缓存）"></a>刷新缓存（就是清空缓存）</h5><p>在mapper的同一个namespace中，如果有其它insert、update、delete操作数据后需要刷新缓存，如果不执行刷新缓存会出现脏读。<br>设置statement配置中的flushCache=”true” 属性，默认情况下为true即刷新缓存，如果改成false则不会刷新。使用缓存时如果手动修改数据库表中的查询数据会出现脏读。<br>如下：<br><code>&lt;insert id=&quot;insertUser&quot; parameterType=&quot;cn.itcast.mybatis.po.User&quot; flushCache=&quot;true&quot;&gt;</code><br>总结：一般下执行完commit操作都需要刷新缓存，flushCache=true表示刷新缓存，这样可以避免数据库脏读。</p><h3 id="mybatis整合ehcache"><a href="#mybatis整合ehcache" class="headerlink" title="mybatis整合ehcache"></a>mybatis整合ehcache</h3><p>ehcache是一个分布式缓存框架</p><h4 id="分布缓存"><a href="#分布缓存" class="headerlink" title="分布缓存"></a>分布缓存</h4><p>我们系统为了提高系统并发，性能、一般对系统进行分布式部署（集群部署方式）<br><img src="/category/MyBatis/g10.png" alt="MyBatis"><br>不使用分布缓存，缓存的数据在各各服务单独存储，不方便系统 开发。所以要使用分布式缓存对缓存数据进行集中管理。<br>mybatis无法实现分布式缓存，需要和其它分布式缓存框架进行整合。</p><h4 id="整合方法"><a href="#整合方法" class="headerlink" title="整合方法"></a>整合方法</h4><p>mybatis提供了一个cache接口，如果要实现自己的缓存逻辑，实现cache接口开发即可。<br>mybatis和ehcache整合，mybatis和ehcache整合包中提供了一个cache接口的实现类。<br><img src="/category/MyBatis/g11.png" alt="MyBatis"><br>mybatis默认实现cache类是：<br><img src="/category/MyBatis/g12.png" alt="MyBatis"></p><h4 id="加入ehcache包"><a href="#加入ehcache包" class="headerlink" title="加入ehcache包"></a>加入ehcache包</h4><p><img src="/category/MyBatis/g13.png" alt="MyBatis"></p><h4 id="整合ehcache"><a href="#整合ehcache" class="headerlink" title="整合ehcache"></a>整合ehcache</h4><p>配置mapper中cache中的type为ehcache对cache接口的实现类型。<br><img src="/category/MyBatis/g14.png" alt="MyBatis"></p><h4 id="加入ehcache的配置文件"><a href="#加入ehcache的配置文件" class="headerlink" title="加入ehcache的配置文件"></a>加入ehcache的配置文件</h4><p>在classpath下配置ehcache.xml<br><img src="/category/MyBatis/g15.png" alt="MyBatis"></p><h4 id="二级应用场景"><a href="#二级应用场景" class="headerlink" title="二级应用场景"></a>二级应用场景</h4><p>对于访问多的查询请求且用户对查询结果实时性要求不高，此时可采用mybatis二级缓存技术降低数据库访问量，提高访问速度，业务场景比如：耗时较高的统计分析sql、电话账单查询sql等。<br>实现方法如下：通过设置刷新间隔时间，由mybatis每隔一段时间自动清空缓存，根据数据变化频率设置缓存刷新间隔flushInterval，比如设置为30分钟、60分钟、24小时等，根据需求而定。</p><h4 id="二级缓存局限性"><a href="#二级缓存局限性" class="headerlink" title="二级缓存局限性"></a>二级缓存局限性</h4><p>mybatis二级缓存对细粒度的数据级别的缓存实现不好，比如如下需求：对商品信息进行缓存，由于商品信息查询访问量大，但是要求用户每次都能查询最新的商品信息，此时如果使用mybatis的二级缓存就无法实现当一个商品变化时只刷新该商品的缓存信息而不刷新其它商品的信息，因为mybaits的二级缓存区域以mapper为单位划分，当一个商品信息变化会将所有商品信息的缓存数据全部清空。解决此类问题需要在业务层根据需求对数据有针对性缓存。</p><h2 id="spring和mybatis整合"><a href="#spring和mybatis整合" class="headerlink" title="spring和mybatis整合"></a>spring和mybatis整合</h2><h3 id="整合思路"><a href="#整合思路" class="headerlink" title="整合思路"></a>整合思路</h3><p>需要spring通过单例方式管理SqlSessionFactory。<br>spring和mybatis整合生成代理对象，使用SqlSessionFactory创建SqlSession。（spring和mybatis整合自动完成）<br>持久层的mapper都需要由spring进行管理。</p><h3 id="整合环境"><a href="#整合环境" class="headerlink" title="整合环境"></a>整合环境</h3><p><img src="/category/MyBatis/q1.png" alt="MyBatis"></p><p><img src="/category/MyBatis/q2.png" alt="MyBatis"></p><h3 id="SqlSessionFactory"><a href="#SqlSessionFactory" class="headerlink" title="SqlSessionFactory"></a>SqlSessionFactory</h3><p>在applicationContext.xml配置sqlSessionFactory和数据源<br>sqlSessionFactory在mybatis和spring的整合包下。</p><p><img src="/category/MyBatis/q3.png" alt="MyBatis"></p><h3 id="原始dao开发（和spring整合后）"><a href="#原始dao开发（和spring整合后）" class="headerlink" title="原始dao开发（和spring整合后）"></a>原始dao开发（和spring整合后）</h3><h4 id="User-xml"><a href="#User-xml" class="headerlink" title="User.xml"></a>User.xml</h4><p><img src="/category/MyBatis/q4.png" alt="MyBatis"></p><p>在SqlMapconfig.xml中加载User.xml</p><p><img src="/category/MyBatis/q5.png" alt="MyBatis"></p><h4 id="dao（实现类继承SqlSessionDaoSupport）"><a href="#dao（实现类继承SqlSessionDaoSupport）" class="headerlink" title="dao（实现类继承SqlSessionDaoSupport）"></a>dao（实现类继承SqlSessionDaoSupport）</h4><p><img src="/category/MyBatis/q6.png" alt="MyBatis"></p><p>dao接口实现类需要注入SqlSessoinFactory，通过spring进行注入。<br>这里spring声明配置方式，配置dao的bean：<br>让UserDaoImpl实现类继承SqlSessionDaoSupport</p><p><img src="/category/MyBatis/q7.png" alt="MyBatis"></p><h4 id="配置dao"><a href="#配置dao" class="headerlink" title="配置dao"></a>配置dao</h4><p>在applicationContext.xml中配置dao。</p><p><img src="/category/MyBatis/q8.png" alt="MyBatis"></p><h4 id="测试程序"><a href="#测试程序" class="headerlink" title="测试程序"></a>测试程序</h4><p><img src="/category/MyBatis/q9.png" alt="MyBatis"></p><h3 id="mapper代理开发"><a href="#mapper代理开发" class="headerlink" title="mapper代理开发"></a>mapper代理开发</h3><h4 id="mapper-xml和mapper-java"><a href="#mapper-xml和mapper-java" class="headerlink" title="mapper.xml和mapper.java"></a>mapper.xml和mapper.java</h4><p><img src="/category/MyBatis/q10.png" alt="MyBatis"></p><h4 id="通过MapperFactoryBean创建代理对象"><a href="#通过MapperFactoryBean创建代理对象" class="headerlink" title="通过MapperFactoryBean创建代理对象"></a>通过MapperFactoryBean创建代理对象</h4><p><img src="/category/MyBatis/q11.png" alt="MyBatis"></p><p>此方法问题：<br>需要针对每个mapper进行配置，麻烦。</p><h4 id="通过MapperScannerConfigurer进行mapper扫描（建议使用）"><a href="#通过MapperScannerConfigurer进行mapper扫描（建议使用）" class="headerlink" title="通过MapperScannerConfigurer进行mapper扫描（建议使用）"></a>通过MapperScannerConfigurer进行mapper扫描（建议使用）</h4><p><img src="/category/MyBatis/q12.png" alt="MyBatis"></p><h4 id="测试代码-1"><a href="#测试代码-1" class="headerlink" title="测试代码"></a>测试代码</h4><p><img src="/category/MyBatis/q13.png" alt="MyBatis"></p><h2 id="逆向工程"><a href="#逆向工程" class="headerlink" title="逆向工程"></a>逆向工程</h2><p>mybaits需要程序员自己编写sql语句，mybatis官方提供逆向工程 可以针对单表自动生成mybatis执行所需要的代码（mapper.java,mapper.xml、po..）<br>企业实际开发中，常用的逆向工程方式：<br>由于数据库的表生成java代码。</p><h3 id="下载逆向工程"><a href="#下载逆向工程" class="headerlink" title="下载逆向工程"></a>下载逆向工程</h3><p><img src="/category/MyBatis/w1.png" alt="MyBatis"></p><h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><h4 id="运行逆向工程"><a href="#运行逆向工程" class="headerlink" title="运行逆向工程"></a>运行逆向工程</h4><p><img src="/category/MyBatis/w2.png" alt="MyBatis"><br>建议使用java程序方式，不依赖开发工具。</p><h4 id="生成代码配置文件"><a href="#生成代码配置文件" class="headerlink" title="生成代码配置文件"></a>生成代码配置文件</h4><p><img src="/category/MyBatis/w3.png" alt="MyBatis"><br><img src="/category/MyBatis/w4.png" alt="MyBatis"></p><h4 id="执行生成程序"><a href="#执行生成程序" class="headerlink" title="执行生成程序"></a>执行生成程序</h4><p><img src="/category/MyBatis/w5.png" alt="MyBatis"><br>生成后的代码：<br><img src="/category/MyBatis/w6.png" alt="MyBatis"></p><h4 id="使用生成的代码"><a href="#使用生成的代码" class="headerlink" title="使用生成的代码"></a>使用生成的代码</h4><p>需要将生成工程中所生成的代码拷贝到自己的工程中。<br>测试ItemsMapper中的方法<br><img src="/category/MyBatis/w7.png" alt="MyBatis"></p><h3 id="使用方法二-IDEA，常用"><a href="#使用方法二-IDEA，常用" class="headerlink" title="使用方法二(IDEA，常用)"></a>使用方法二(IDEA，常用)</h3><p>mybatis-generator.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"DB2Tables"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--数据库链接地址账号密码--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.cj.jdbc.Driver"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">"jdbc:mysql://127.0.0.1:3306/seckill"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">"root"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">"123456"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成dataobject类存放位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"com.goya.dataobject"</span> <span class="attr">targetProject</span>=<span class="string">"src/main/java"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成映射文件存放位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"mapping"</span>  <span class="attr">targetProject</span>=<span class="string">"src/main/resources"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成dao类存放位置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> <span class="attr">targetPackage</span>=<span class="string">"com.goya.dao"</span>  <span class="attr">targetProject</span>=<span class="string">"src/main/java"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--生成对应表及类名--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;table tableName="user_info" domainObjectName="UserDO" enableCountByExample="false"--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        enableUpdateByExample="false" enableDeleteByExample="false"--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        &lt;table tableName="user_password" domainObjectName="UserPass" enableCountByExample="false"--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableUpdateByExample="false" enableDeleteByExample="false"--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--               enableSelectByExample="false" selectByExampleQueryId="false"&gt;&lt;/table&gt;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"user_info"</span> <span class="attr">domainObjectName</span>=<span class="string">"UserDO"</span> <span class="attr">enableCountByExample</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">"false"</span> <span class="attr">enableDeleteByExample</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">"false"</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"user_password"</span> <span class="attr">domainObjectName</span>=<span class="string">"UserPasswordDO"</span> <span class="attr">enableCountByExample</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableUpdateByExample</span>=<span class="string">"false"</span> <span class="attr">enableDeleteByExample</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">enableSelectByExample</span>=<span class="string">"false"</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>pom plugin</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--mybatis自动生成插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>mybatis generator<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">goal</span>&gt;</span>generate<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--允许移动生成的文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">verbose</span>&gt;</span>true<span class="tag">&lt;/<span class="name">verbose</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--允许覆盖,企业开发不要设置为true--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">overwrite</span>&gt;</span>true<span class="tag">&lt;/<span class="name">overwrite</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">      src/main/resources/mybatis-generator.xml</span><br><span class="line">    <span class="tag">&lt;/<span class="name">configurationFile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">----------------本文结束<i class="fa fa-heart"></i>感谢阅读----------------</div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong> Goya</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://www.ysmjjsy.com/category/MyBatis/" title="SSM框架-MyBatis">https://www.ysmjjsy.com/category/MyBatis/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/SSM框架/" rel="tag"><i class="fa fa-tag"></i> SSM框架</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/category/Hibernate/" rel="next" title="SSH框架-Hibernate"><i class="fa fa-chevron-left"></i> SSH框架-Hibernate</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/category/SpringMVC/" rel="prev" title="SSM框架-SpringMVC">SSM框架-SpringMVC <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5d44446d8ec752bd" async></script></div></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Goya"><p class="site-author-name" itemprop="name">Goya</p><p class="site-description motion-element" itemprop="description">愿你走出半生，归来仍是少年</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">37</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">50</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">9</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/GoyaDo" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/a773949603" target="_blank" title="CSDN"><i class="fa fa-fw fa-copyright"></i>CSDN</a> </span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/lemondeah/activities" target="_blank" title="知乎"><i class="fa fa-fw fa-zhihu"></i>知乎</a> </span><span class="links-of-author-item"><a href="https://weibo.com/u/6606679478" target="_blank" title="微博"><i class="fa fa-fw fa-weibo"></i>微博</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://me.csdn.net/sinyu890807" title="郭霖" target="_blank">郭霖</a></li><li class="links-of-blogroll-item"><a href="https://www.zhihu.com/people/huangsunting/activities" title="bravo1988" target="_blank">bravo1988</a></li></ul></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MyBatis"><span class="nav-number">1.</span> <span class="nav-text">MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#JDBC编码问题"><span class="nav-number">1.1.</span> <span class="nav-text">JDBC编码问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#原生态jdbc编程中的问题总结"><span class="nav-number">1.1.1.</span> <span class="nav-text">原生态jdbc编程中的问题总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis-1"><span class="nav-number">1.2.</span> <span class="nav-text">MyBatis</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis是什么？"><span class="nav-number">1.2.1.</span> <span class="nav-text">MyBatis是什么？</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis框架"><span class="nav-number">1.2.2.</span> <span class="nav-text">MyBatis框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#入门程序"><span class="nav-number">1.2.3.</span> <span class="nav-text">入门程序</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#需求"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">需求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#log4j"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">log4j</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#工程结构"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">工程结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SqlMapConfig-xml"><span class="nav-number">1.2.3.4.</span> <span class="nav-text">SqlMapConfig.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#根据用户id（主键）查询用户信息"><span class="nav-number">1.2.3.5.</span> <span class="nav-text">根据用户id（主键）查询用户信息</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#po类"><span class="nav-number">1.2.3.5.1.</span> <span class="nav-text">po类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#映射文件"><span class="nav-number">1.2.3.5.2.</span> <span class="nav-text">映射文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在SqlMapConfig中加载映射文件"><span class="nav-number">1.2.3.5.3.</span> <span class="nav-text">在SqlMapConfig中加载映射文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#程序编写"><span class="nav-number">1.2.3.5.4.</span> <span class="nav-text">程序编写</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#根据用户名称模糊查询用户信息"><span class="nav-number">1.2.3.6.</span> <span class="nav-text">根据用户名称模糊查询用户信息</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#映射文件-1"><span class="nav-number">1.2.3.6.1.</span> <span class="nav-text">映射文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试类"><span class="nav-number">1.2.3.6.2.</span> <span class="nav-text">测试类</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询用户小结"><span class="nav-number">1.2.3.7.</span> <span class="nav-text">查询用户小结</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加用户"><span class="nav-number">1.2.3.8.</span> <span class="nav-text">添加用户</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#映射文件-2"><span class="nav-number">1.2.3.8.1.</span> <span class="nav-text">映射文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试类-1"><span class="nav-number">1.2.3.8.2.</span> <span class="nav-text">测试类</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#主键返回"><span class="nav-number">1.2.3.9.</span> <span class="nav-text">主键返回</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#自增主键返回"><span class="nav-number">1.2.3.9.1.</span> <span class="nav-text">自增主键返回</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#非自增主键返回（使用uuid"><span class="nav-number">1.2.3.9.2.</span> <span class="nav-text">非自增主键返回（使用uuid())</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除用户"><span class="nav-number">1.2.3.10.</span> <span class="nav-text">删除用户</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#映射文件-3"><span class="nav-number">1.2.3.10.1.</span> <span class="nav-text">映射文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试类-2"><span class="nav-number">1.2.3.10.2.</span> <span class="nav-text">测试类</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#更新用户"><span class="nav-number">1.2.3.11.</span> <span class="nav-text">更新用户</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#映射文件-4"><span class="nav-number">1.2.3.11.1.</span> <span class="nav-text">映射文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试类-3"><span class="nav-number">1.2.3.11.2.</span> <span class="nav-text">测试类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MyBatis和Hibernate的本质区别-mapper"><span class="nav-number">1.2.4.</span> <span class="nav-text">MyBatis和Hibernate的本质区别-mapper</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#hibernate"><span class="nav-number">1.2.4.1.</span> <span class="nav-text">hibernate</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mybatis"><span class="nav-number">1.2.4.2.</span> <span class="nav-text">mybatis</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mybatis开发dao方法"><span class="nav-number">1.2.4.3.</span> <span class="nav-text">mybatis开发dao方法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SqlSesssion应用场合"><span class="nav-number">1.2.4.3.1.</span> <span class="nav-text">SqlSesssion应用场合</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#原始dao开发方法（写dao接口和dao实现类）"><span class="nav-number">1.2.4.4.</span> <span class="nav-text">原始dao开发方法（写dao接口和dao实现类）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#dao接口"><span class="nav-number">1.2.4.4.1.</span> <span class="nav-text">dao接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#dao接口实现类"><span class="nav-number">1.2.4.4.2.</span> <span class="nav-text">dao接口实现类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试代码"><span class="nav-number">1.2.4.4.3.</span> <span class="nav-text">测试代码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#原始dao开发问题"><span class="nav-number">1.2.4.4.4.</span> <span class="nav-text">原始dao开发问题</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mapper代理方法（只需要mapper接口（相当于dao接口））"><span class="nav-number">1.2.4.5.</span> <span class="nav-text">mapper代理方法（只需要mapper接口（相当于dao接口））</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#思路："><span class="nav-number">1.2.4.5.1.</span> <span class="nav-text">思路：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试"><span class="nav-number">1.2.4.5.2.</span> <span class="nav-text">测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SqlMapConfig"><span class="nav-number">1.2.5.</span> <span class="nav-text">SqlMapConfig</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Properties属性"><span class="nav-number">1.2.5.1.</span> <span class="nav-text">Properties属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#settings全局参数配置"><span class="nav-number">1.2.5.2.</span> <span class="nav-text">settings全局参数配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#typeAliases（别名）"><span class="nav-number">1.2.5.3.</span> <span class="nav-text">typeAliases（别名）</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#mybatis默认支持的别名"><span class="nav-number">1.2.5.3.1.</span> <span class="nav-text">mybatis默认支持的别名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#自定义别名"><span class="nav-number">1.2.5.3.2.</span> <span class="nav-text">自定义别名</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#typeHandlers（类型处理器）"><span class="nav-number">1.2.5.4.</span> <span class="nav-text">typeHandlers（类型处理器）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mappers（映射配置）"><span class="nav-number">1.2.5.5.</span> <span class="nav-text">mappers（映射配置）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输入映射-输出映射"><span class="nav-number">1.2.6.</span> <span class="nav-text">输入映射/输出映射</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#输入映射"><span class="nav-number">1.2.6.1.</span> <span class="nav-text">输入映射</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#传递pojo的包装对象"><span class="nav-number">1.2.6.1.1.</span> <span class="nav-text">传递pojo的包装对象</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#传递HashMap"><span class="nav-number">1.2.6.1.2.</span> <span class="nav-text">传递HashMap</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输出映射"><span class="nav-number">1.2.6.2.</span> <span class="nav-text">输出映射</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#resultType"><span class="nav-number">1.2.6.2.1.</span> <span class="nav-text">resultType</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#resultMap"><span class="nav-number">1.2.6.2.2.</span> <span class="nav-text">resultMap</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#动态sql"><span class="nav-number">1.2.7.</span> <span class="nav-text">动态sql</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是动态sql"><span class="nav-number">1.2.7.1.</span> <span class="nav-text">什么是动态sql</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sql片段"><span class="nav-number">1.2.7.2.</span> <span class="nav-text">sql片段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#foreach"><span class="nav-number">1.2.7.3.</span> <span class="nav-text">foreach</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#高级映射"><span class="nav-number">1.2.8.</span> <span class="nav-text">高级映射</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#订单商品数据模型"><span class="nav-number">1.2.8.1.</span> <span class="nav-text">订单商品数据模型</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#数据模型分析思路"><span class="nav-number">1.2.8.1.1.</span> <span class="nav-text">数据模型分析思路</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#数据模型分析"><span class="nav-number">1.2.8.1.2.</span> <span class="nav-text">数据模型分析</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一对一查询"><span class="nav-number">1.2.8.2.</span> <span class="nav-text">一对一查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#需求-1"><span class="nav-number">1.2.8.2.1.</span> <span class="nav-text">需求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#resultType-1"><span class="nav-number">1.2.8.2.2.</span> <span class="nav-text">resultType</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#sql语句"><span class="nav-number">1.2.8.2.2.1.</span> <span class="nav-text">sql语句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#创建pojo"><span class="nav-number">1.2.8.2.2.2.</span> <span class="nav-text">创建pojo</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mapper-xml"><span class="nav-number">1.2.8.2.2.3.</span> <span class="nav-text">mapper.xml</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mapper-java"><span class="nav-number">1.2.8.2.2.4.</span> <span class="nav-text">mapper.java</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#resultMap-1"><span class="nav-number">1.2.8.2.3.</span> <span class="nav-text">resultMap</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#sql语句-1"><span class="nav-number">1.2.8.2.3.1.</span> <span class="nav-text">sql语句</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#使用resultMap映射的思路"><span class="nav-number">1.2.8.2.3.2.</span> <span class="nav-text">使用resultMap映射的思路</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#需要Orders类中添加user属性"><span class="nav-number">1.2.8.2.3.3.</span> <span class="nav-text">需要Orders类中添加user属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mapper-xml-1"><span class="nav-number">1.2.8.2.3.4.</span> <span class="nav-text">mapper.xml</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mapper-java-1"><span class="nav-number">1.2.8.2.3.5.</span> <span class="nav-text">mapper.java</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#resultType和resultMap实现一对一查询小结"><span class="nav-number">1.2.8.2.4.</span> <span class="nav-text">resultType和resultMap实现一对一查询小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一对多查询"><span class="nav-number">1.2.8.3.</span> <span class="nav-text">一对多查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#需求-2"><span class="nav-number">1.2.8.3.1.</span> <span class="nav-text">需求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sql语句-2"><span class="nav-number">1.2.8.3.2.</span> <span class="nav-text">sql语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#分析"><span class="nav-number">1.2.8.3.3.</span> <span class="nav-text">分析</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在orders中添加list订单明细属性"><span class="nav-number">1.2.8.3.4.</span> <span class="nav-text">在orders中添加list订单明细属性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mapper-xml-2"><span class="nav-number">1.2.8.3.5.</span> <span class="nav-text">mapper.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#resultMap定义"><span class="nav-number">1.2.8.3.6.</span> <span class="nav-text">resultMap定义</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mapper-java-2"><span class="nav-number">1.2.8.3.7.</span> <span class="nav-text">mapper.java</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#小结"><span class="nav-number">1.2.8.3.8.</span> <span class="nav-text">小结</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多对多查询"><span class="nav-number">1.2.8.4.</span> <span class="nav-text">多对多查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#需求-3"><span class="nav-number">1.2.8.4.1.</span> <span class="nav-text">需求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#sql语句-3"><span class="nav-number">1.2.8.4.2.</span> <span class="nav-text">sql语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#映射思路"><span class="nav-number">1.2.8.4.3.</span> <span class="nav-text">映射思路</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mapper-xml-3"><span class="nav-number">1.2.8.4.4.</span> <span class="nav-text">mapper.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#resultMap定义-1"><span class="nav-number">1.2.8.4.5.</span> <span class="nav-text">resultMap定义</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mapper-java-3"><span class="nav-number">1.2.8.4.6.</span> <span class="nav-text">mapper.java</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#多对多查询总结"><span class="nav-number">1.2.8.4.7.</span> <span class="nav-text">多对多查询总结</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#resultMap总结"><span class="nav-number">1.2.8.4.8.</span> <span class="nav-text">resultMap总结</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#延迟加载"><span class="nav-number">1.2.9.</span> <span class="nav-text">延迟加载</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是延迟加载"><span class="nav-number">1.2.9.1.</span> <span class="nav-text">什么是延迟加载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用association实现延迟加载"><span class="nav-number">1.2.9.2.</span> <span class="nav-text">使用association实现延迟加载</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#需求-4"><span class="nav-number">1.2.9.2.1.</span> <span class="nav-text">需求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mapper-xml-4"><span class="nav-number">1.2.9.2.2.</span> <span class="nav-text">mapper.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#延迟加载resultMap"><span class="nav-number">1.2.9.2.3.</span> <span class="nav-text">延迟加载resultMap</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mapper-java-4"><span class="nav-number">1.2.9.2.4.</span> <span class="nav-text">mapper.java</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试："><span class="nav-number">1.2.9.2.5.</span> <span class="nav-text">测试：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#延迟加载思考"><span class="nav-number">1.2.9.2.6.</span> <span class="nav-text">延迟加载思考</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询缓存"><span class="nav-number">1.2.10.</span> <span class="nav-text">查询缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是查询缓存"><span class="nav-number">1.2.10.1.</span> <span class="nav-text">什么是查询缓存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#一级缓存"><span class="nav-number">1.2.10.2.</span> <span class="nav-text">一级缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#一级缓存工作原理"><span class="nav-number">1.2.10.2.1.</span> <span class="nav-text">一级缓存工作原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#一级缓存测试"><span class="nav-number">1.2.10.2.2.</span> <span class="nav-text">一级缓存测试</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#一级缓存应用"><span class="nav-number">1.2.10.2.3.</span> <span class="nav-text">一级缓存应用</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二级缓存"><span class="nav-number">1.2.10.3.</span> <span class="nav-text">二级缓存</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#二级缓存原理"><span class="nav-number">1.2.10.3.1.</span> <span class="nav-text">二级缓存原理</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#开启二级缓存"><span class="nav-number">1.2.10.3.2.</span> <span class="nav-text">开启二级缓存</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#调用pojo类实现序列化接口"><span class="nav-number">1.2.10.3.3.</span> <span class="nav-text">调用pojo类实现序列化接口</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#测试方法"><span class="nav-number">1.2.10.3.4.</span> <span class="nav-text">测试方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#userCache配置"><span class="nav-number">1.2.10.3.5.</span> <span class="nav-text">userCache配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#刷新缓存（就是清空缓存）"><span class="nav-number">1.2.10.3.6.</span> <span class="nav-text">刷新缓存（就是清空缓存）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mybatis整合ehcache"><span class="nav-number">1.2.11.</span> <span class="nav-text">mybatis整合ehcache</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分布缓存"><span class="nav-number">1.2.11.1.</span> <span class="nav-text">分布缓存</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#整合方法"><span class="nav-number">1.2.11.2.</span> <span class="nav-text">整合方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加入ehcache包"><span class="nav-number">1.2.11.3.</span> <span class="nav-text">加入ehcache包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#整合ehcache"><span class="nav-number">1.2.11.4.</span> <span class="nav-text">整合ehcache</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加入ehcache的配置文件"><span class="nav-number">1.2.11.5.</span> <span class="nav-text">加入ehcache的配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二级应用场景"><span class="nav-number">1.2.11.6.</span> <span class="nav-text">二级应用场景</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#二级缓存局限性"><span class="nav-number">1.2.11.7.</span> <span class="nav-text">二级缓存局限性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#spring和mybatis整合"><span class="nav-number">1.3.</span> <span class="nav-text">spring和mybatis整合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#整合思路"><span class="nav-number">1.3.1.</span> <span class="nav-text">整合思路</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#整合环境"><span class="nav-number">1.3.2.</span> <span class="nav-text">整合环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SqlSessionFactory"><span class="nav-number">1.3.3.</span> <span class="nav-text">SqlSessionFactory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#原始dao开发（和spring整合后）"><span class="nav-number">1.3.4.</span> <span class="nav-text">原始dao开发（和spring整合后）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#User-xml"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">User.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dao（实现类继承SqlSessionDaoSupport）"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">dao（实现类继承SqlSessionDaoSupport）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#配置dao"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">配置dao</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#测试程序"><span class="nav-number">1.3.4.4.</span> <span class="nav-text">测试程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mapper代理开发"><span class="nav-number">1.3.5.</span> <span class="nav-text">mapper代理开发</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#mapper-xml和mapper-java"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">mapper.xml和mapper.java</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通过MapperFactoryBean创建代理对象"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">通过MapperFactoryBean创建代理对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通过MapperScannerConfigurer进行mapper扫描（建议使用）"><span class="nav-number">1.3.5.3.</span> <span class="nav-text">通过MapperScannerConfigurer进行mapper扫描（建议使用）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#测试代码-1"><span class="nav-number">1.3.5.4.</span> <span class="nav-text">测试代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#逆向工程"><span class="nav-number">1.4.</span> <span class="nav-text">逆向工程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#下载逆向工程"><span class="nav-number">1.4.1.</span> <span class="nav-text">下载逆向工程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用方法"><span class="nav-number">1.4.2.</span> <span class="nav-text">使用方法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#运行逆向工程"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">运行逆向工程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#生成代码配置文件"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">生成代码配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#执行生成程序"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">执行生成程序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用生成的代码"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">使用生成的代码</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用方法二-IDEA，常用"><span class="nav-number">1.4.3.</span> <span class="nav-text">使用方法二(IDEA，常用)</span></a></li></ol></li></ol></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019-10-22</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Goya</span></div><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>function createtime(){var n=new Date("07/03/2018 14:13:22");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="网站已运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}var now=new Date;setInterval("createtime()",250)</script><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 网站总访客数 <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人次 </span><span class="site-pv"><i class="fa fa-eye"></i> 总访问量 <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次</span></div></div></footer></div><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="https://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'BuVPeD8Q1vkGqU4nrrrSUa9y-gzGzoHsz',
        appKey: '0SU6m8Ctovo9j6oHFbNVyHPv',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });</script><script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html><script type="text/javascript" src="/js/src/love.js"></script><!-- rebuild by neat -->